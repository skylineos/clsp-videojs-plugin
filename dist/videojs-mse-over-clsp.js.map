{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/debug/src/browser.js","webpack:///./node_modules/debug/src/common.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/_apply.js","webpack:///./node_modules/lodash/_arrayLikeKeys.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/lodash/_baseIsArguments.js","webpack:///./node_modules/lodash/_baseIsNative.js","webpack:///./node_modules/lodash/_baseIsTypedArray.js","webpack:///./node_modules/lodash/_baseKeysIn.js","webpack:///./node_modules/lodash/_baseRest.js","webpack:///./node_modules/lodash/_baseSetToString.js","webpack:///./node_modules/lodash/_baseTimes.js","webpack:///./node_modules/lodash/_baseUnary.js","webpack:///./node_modules/lodash/_coreJsData.js","webpack:///./node_modules/lodash/_defineProperty.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/lodash/_getNative.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/lodash/_getValue.js","webpack:///./node_modules/lodash/_isIndex.js","webpack:///./node_modules/lodash/_isIterateeCall.js","webpack:///./node_modules/lodash/_isMasked.js","webpack:///./node_modules/lodash/_isPrototype.js","webpack:///./node_modules/lodash/_nativeKeysIn.js","webpack:///./node_modules/lodash/_nodeUtil.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/_overRest.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/_setToString.js","webpack:///./node_modules/lodash/_shortOut.js","webpack:///./node_modules/lodash/_toSource.js","webpack:///./node_modules/lodash/constant.js","webpack:///./node_modules/lodash/defaults.js","webpack:///./node_modules/lodash/eq.js","webpack:///./node_modules/lodash/identity.js","webpack:///./node_modules/lodash/isArguments.js","webpack:///./node_modules/lodash/isArray.js","webpack:///./node_modules/lodash/isArrayLike.js","webpack:///./node_modules/lodash/isBuffer.js","webpack:///./node_modules/lodash/isFunction.js","webpack:///./node_modules/lodash/isLength.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/lodash/isTypedArray.js","webpack:///./node_modules/lodash/keysIn.js","webpack:///./node_modules/lodash/noop.js","webpack:///./node_modules/lodash/stubFalse.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/node-libs-browser/node_modules/process/browser.js","webpack:///./node_modules/srcdoc-polyfill/srcdoc-polyfill.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/v4.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/MqttConduitCollection.js","webpack:///./src/js/MqttHandler.js","webpack:///./src/js/MqttSourceHandler.js","webpack:///./src/js/MseOverMqttPlugin.js","webpack:///./src/js/conduit/clspConduit.generated.js","webpack:///./src/js/iov/IOV.js","webpack:///./src/js/iov/MSEWrapper.js","webpack:///./src/js/iov/MqttTopicHandlers.js","webpack:///./src/js/iov/player.js","webpack:///./src/js/utils.js","webpack:///./src/js/videojs-mse-over-clsp.js","webpack:///./src/styles/videojs-mse-over-clsp.scss","webpack:///external \"videojs\""],"names":["exports","log","formatArgs","save","load","useColors","storage","localstorage","colors","window","process","type","__nwjs","navigator","userAgent","toLowerCase","match","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","args","namespace","module","humanize","diff","c","color","splice","index","lastC","replace","namespaces","setItem","removeItem","error","r","getItem","env","DEBUG","localStorage","require","formatters","j","v","JSON","stringify","message","setup","createDebug","debug","default","coerce","disable","enable","enabled","Object","keys","forEach","key","instances","names","skips","selectColor","hash","i","length","charCodeAt","Math","abs","prevTime","self","curr","Number","Date","ms","prev","unshift","format","formatter","val","call","logFn","apply","destroy","extend","init","push","indexOf","delimiter","split","len","substr","instance","map","toNamespace","join","name","test","regexp","toString","substring","Error","stack","root","Symbol","func","thisArg","baseTimes","isArguments","isArray","isBuffer","isIndex","isTypedArray","objectProto","prototype","hasOwnProperty","arrayLikeKeys","value","inherited","isArr","isArg","isBuff","isType","skipIndexes","result","String","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","toStringTag","undefined","baseGetTag","isObjectLike","argsTag","baseIsArguments","isFunction","isMasked","isObject","toSource","reRegExpChar","reIsHostCtor","funcProto","Function","funcToString","reIsNative","baseIsNative","pattern","isLength","arrayTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","objectTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","isPrototype","nativeKeysIn","baseKeysIn","object","isProto","identity","overRest","setToString","baseRest","start","constant","defineProperty","baseSetToString","string","n","iteratee","Array","baseUnary","coreJsData","getNative","e","freeGlobal","global","getValue","nativeObjectToString","isOwn","tag","unmasked","MAX_SAFE_INTEGER","reIsUint","eq","isArrayLike","isIterateeCall","maskSrcKey","uid","exec","IE_PROTO","Ctor","constructor","proto","freeExports","nodeType","freeModule","moduleExports","freeProcess","nodeUtil","types","binding","nativeMax","max","transform","arguments","array","otherArgs","freeSelf","shortOut","HOT_COUNT","HOT_SPAN","nativeNow","now","count","lastCalled","stamp","remaining","keysIn","defaults","sources","guard","source","props","propsIndex","propsLength","other","propertyIsEnumerable","stubFalse","Buffer","nativeIsBuffer","asyncTag","genTag","proxyTag","nodeIsTypedArray","noop","s","m","h","d","w","y","options","parse","isNaN","long","fmtLong","fmtShort","str","parseFloat","msAbs","round","plural","isPlural","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","nextTick","Item","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","cwd","chdir","dir","umask","factory","_srcDoc","srcDoc","define","idx","iframes","isCompliant","createElement","sandboxMsg","sandboxAllow","validate","iframe","sandbox","getAttribute","force","removeAttribute","logError","setAttribute","implementations","compliant","content","legacy","jsUrl","contentWindow","location","msg","set","noConflict","getElementsByTagName","byteToHex","bytesToUuid","buf","offset","bth","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","whatwgRNG","rnds","mathRNG","random","rng","v4","ii","g","webpackPolyfill","deprecate","paths","children","enumerable","get","l","DEBUG_PREFIX","singleton","MqttConduitCollection","Debug","_conduits","addEventListener","event","clientId","data","exists","conduit","getById","iov","onMessage","id","config","mqttConduit","Component","videojs","getComponent","MqttHandler","tech","mqttConduitCollection","mqtt","tech_","source_","player","updateIOV","IOV","fromUrl","src","initialize","SUPPORTED_MIME_TYPE","mode","obj","canHandleSource","srcObj","startsWith","utils","supported","canPlayType","handleSource","localOptions","mergeOptions","Plugin","getPlugin","defaultOptions","getTech","registerSourceHandler","MqttSourceHandler","registerPlugin","ClspPlugin","maxRetriesOnError","tourDuration","enableMetrics","videojsErrorsOptions","onMqttHandlerError","mqttHandler","code","headline","playerOptions","options_","getDefaultOptions","clsp","_playerOptions","currentSourceIndex","addClass","customClass","resetErrors","dismiss","autoplayEnabled","autoplay","_errorRetriesCount","_currentTime","currentTime","play","destroyed","initializeIOV","restart","errors","PLAYER_ERR_NOT_COMPAT","errorDisplay","close","getVideojsErrorsOptions","createIOV","defaultNonSslPort","defaultSslPort","VERSION","METRIC_TYPES","iframe_code","pframe_client","dispatch","command","postMessage","t","setInterval","clearInterval","inboundHandler","handler","destinationName","subscribe","topic","callback","method","unsubscribe","publish","connect","disconnect","transaction","resp_topic","mqtt_resp","resp","payloadString","MqttUseSSL","useSSL","markup","wsbroker","wsport","origin","srcdoc","width","height","videoElementParent","appendChild","videoElement","parentNode","NoMediaSourceAlert","MediaSource","WebKitMediaSource","alert","url","parser","default_port","href","pathname","streamName","hostname","port","generateConfigFromUrl","compatibilityCheck","uuidv4","onReadyAlreadyCalled","playerInstance","el","appStart","changeSourceMaxWait","CHANGE_SOURCE_MAX_WAIT","statsMsg","byteCount","inkbps","host","mqttTopicHandlers","MqttTopicHandlers","events","connection_lost","responseObject","on_message","msghandler","text","addFromIov","IOVPlayer","cloneConfig","clone","cloneFromUrl","videoElementParentId","videoTag","trigger","warn","loadingSpinner","hide","display","playerInstanceEventListeners","changesrc","onChangeSource","hidden","_statsTimer","reason","eventType","onReady","onFail","onData","remove","getElementById","removeChild","silly","FULL_BUFFER_ERROR","MSEWrapper","mimeCodec","isTypeSupported","onSourceBufferUpdateEnd","metric","shouldAbort","sourceBufferAbort","sourceBuffer","buffered","info","getBufferTimes","timeBuffered","currentBufferSize","previousBufferSize","onRemoveFinish","onAppendFinish","processNextInQueue","bufferSizeLimit","floor","bufferTruncateFactor","bufferTruncateValue","driftThreshold","duration","segmentQueue","sequenceNumber","mediaSource","objectURL","metrics","EVENT_NAMES","eventListeners","action","includes","onSourceOpen","onSourceEnded","onError","destroyMediaSource","sourceopen","sourceended","URL","createObjectURL","revokeObjectURL","destroyVideoElementSrc","getVideoElementSrc","readyState","updating","onAppendStart","onAppendError","onRemoveError","onStreamFrozen","retry","isMediaSourceReady","destroySourceBuffer","addSourceBuffer","segment","timestamp","byteArray","abort","onAbortError","estimatedDrift","appendBuffer","trimBuffer","isSourceBufferReady","_append","shift","moof","moov","queueSegment","formatMoof","bufferTimeStart","bufferTimeEnd","end","clearBuffer","trimEndTime","Infinity","previousTimeEnd","Promise","resolve","reject","finish","removeEventListener","endOfStream","removeSourceBuffer","destroyPromise","then","_freeAllResources","catch","_handlers","onVisibilityChange","stop","_id","eid","firstChild","initializeVideoElement","segmentIntervalSampleSize","SEGMENT_INTERVAL_SAMPLE_SIZE","driftCorrectionConstant","DRIFT_CORRECTION_CONSTANT","state","firstFrameShown","stopped","LogSourceBuffer","LogSourceBufferTopic","latestSegmentReceived","segmentIntervalAverage","segmentInterval","segmentIntervals","mseWrapper","moovBox","guid","sillyMetrics","isMimeCodecSupported","videoPlayer","PLAYER_ERR_IOV","videoJsVideoElement","videoId","cloneNode","classList","add","insertBefore","videos","video","initializeMediaSource","initializeSourceBuffer","mqtt_msg","Paho","MQTT","Message","MQTTClient","send","drift","paused","promise","_onError","reinitializeMseWrapper","appendMoov","reinitializeVideoElementSrc","btoa","onIovPlayTransaction","previousSegmentReceived","segmentIntervalSum","assertMimeCodecSupported","initSegmentTopic","payloadBytes","newTopic","getSegmentIntervalMetrics","append","resyncStream","PLUGIN_NAME","MINIMUM_CHROME_VERSION","browserIsCompatable","isChrome","Boolean","chrome","isSupportedMimeType","mimeType","clspPlugin","MseOverMqttPlugin","register"],"mappings":"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","file":"videojs-mse-over-clsp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\nfunction log(...args) {\n\t// This hackery is required for IE8/9, where\n\t// the `console.log` function doesn't have 'apply'\n\treturn typeof console === 'object' &&\n\t\tconsole.log &&\n\t\tconsole.log(...args);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\t\t// Debug.formatArgs = formatArgs;\n\t\t// debug.rawLog = rawLog;\n\n\t\t// env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\treturn createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\-?\\d?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function(root, factory) {\n\t// `root` does not resolve to the global window object in a Browserified\n\t// bundle, so a direct reference to that object is used instead.\n\tvar _srcDoc = window.srcDoc;\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['exports'], function(exports) {\n\t\t\tfactory(exports, _srcDoc);\n\t\t\troot.srcDoc = exports;\n\t\t});\n\t} else if (typeof exports === \"object\") {\n\t\tfactory(exports, _srcDoc);\n\t} else {\n\t\troot.srcDoc = {};\n\t\tfactory(root.srcDoc, _srcDoc);\n\t}\n})(this, function(exports, _srcDoc) {\n\tvar idx, iframes;\n\tvar isCompliant = !!(\"srcdoc\" in document.createElement(\"iframe\"));\n\tvar sandboxMsg = \"Polyfill may not function in the presence of the \" +\n\t\t\"`sandbox` attribute. Consider using the `force` option.\";\n\tvar sandboxAllow = /\\ballow-same-origin\\b/;\n\t/**\n\t * Determine if the operation may be blocked by the `sandbox` attribute in\n\t * some environments, and optionally issue a warning or remove the\n\t * attribute.\n\t */\n\tvar validate = function( iframe, options ) {\n\t\tvar sandbox = iframe.getAttribute(\"sandbox\");\n\t\tif (typeof sandbox === \"string\" && !sandboxAllow.test(sandbox)) {\n\t\t\tif (options && options.force) {\n\t\t\t\tiframe.removeAttribute(\"sandbox\");\n\t\t\t} else if (!options || options.force !== false) {\n\t\t\t\tlogError(sandboxMsg);\n\t\t\t\tiframe.setAttribute(\"data-srcdoc-polyfill\", sandboxMsg);\n\t\t\t}\n\t\t}\n\t};\n\tvar implementations = {\n\t\tcompliant: function( iframe, content, options ) {\n\n\t\t\tif (content) {\n\t\t\t\tvalidate(iframe, options);\n\t\t\t\tiframe.setAttribute(\"srcdoc\", content);\n\t\t\t}\n\t\t},\n\t\tlegacy: function( iframe, content, options ) {\n\n\t\t\tvar jsUrl;\n\n\t\t\tif (!iframe || !iframe.getAttribute) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!content) {\n\t\t\t\tcontent = iframe.getAttribute(\"srcdoc\");\n\t\t\t} else {\n\t\t\t\tiframe.setAttribute(\"srcdoc\", content);\n\t\t\t}\n\n\t\t\tif (content) {\n\t\t\t\tvalidate(iframe, options);\n\n\t\t\t\t// The value returned by a script-targeted URL will be used as\n\t\t\t\t// the iFrame's content. Create such a URL which returns the\n\t\t\t\t// iFrame element's `srcdoc` attribute.\n\t\t\t\tjsUrl = \"javascript: window.frameElement.getAttribute('srcdoc');\";\n\n\t\t\t\t// Explicitly set the iFrame's window.location for\n\t\t\t\t// compatability with IE9, which does not react to changes in\n\t\t\t\t// the `src` attribute when it is a `javascript:` URL, for\n\t\t\t\t// some reason\n\t\t\t\tif (iframe.contentWindow) {\n\t\t\t\t\tiframe.contentWindow.location = jsUrl;\n\t\t\t\t}\n\n\t\t\t\tiframe.setAttribute(\"src\", jsUrl);\n\t\t\t}\n\t\t}\n\t};\n\tvar srcDoc = exports;\n\tvar logError;\n\n\tif (window.console && window.console.error) {\n\t\tlogError = function(msg) {\n\t\t\twindow.console.error(\"[srcdoc-polyfill] \" + msg);\n\t\t};\n\t} else {\n\t\tlogError = function() {};\n\t}\n\n\t// Assume the best\n\tsrcDoc.set = implementations.compliant;\n\tsrcDoc.noConflict = function() {\n\t\twindow.srcDoc = _srcDoc;\n\t\treturn srcDoc;\n\t};\n\n\t// If the browser supports srcdoc, no shimming is necessary\n\tif (isCompliant) {\n\t\treturn;\n\t}\n\n\tsrcDoc.set = implementations.legacy;\n\n\t// Automatically shim any iframes already present in the document\n\tiframes = document.getElementsByTagName(\"iframe\");\n\tidx = iframes.length;\n\n\twhile (idx--) {\n\t\tsrcDoc.set( iframes[idx] );\n\t}\n\n});\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'skyline:clsp';\n\nlet singleton;\n\nexport default class MqttConduitCollection {\n  static factory () {\n    if (!singleton) {\n      singleton = new MqttConduitCollection();\n    }\n\n    return singleton;\n  }\n\n  constructor () {\n    this.debug = Debug(`${DEBUG_PREFIX}:MqttConduitCollection`);\n\n    this.debug('constructing...');\n\n    this._conduits = {};\n\n    window.addEventListener('message', (event) => {\n      this.debug('window on message');\n\n      const clientId = event.data.clientId;\n\n      if (!this.exists(clientId)) {\n        // When the mqtt connection is interupted due to a listener being removed,\n        // a fail event is always sent.  It is not necessary to log this as an error\n        // in the console, because it is not an error.\n        if (!event.data.event === 'fail') {\n          console.error(`No conduit with id \"${clientId}\" exists!`);\n        }\n\n        return;\n      }\n\n      const conduit = this.getById(clientId);\n      const iov = conduit.iov;\n\n      iov.onMessage(event);\n    });\n  }\n\n  set (id, conduit) {\n    this.debug('setting...', id, conduit);\n\n    this._conduits[id] = conduit;\n\n    return conduit;\n  }\n\n  remove (id) {\n    delete this._conduits[id];\n  }\n\n  addFromIov (iov) {\n    this.debug('adding from iov...', iov);\n\n    const conduit = this.exists(iov.config.clientId)\n      ? this.getById(iov.config.clientId)\n      : window.mqttConduit(iov);\n\n    return this.set(iov.config.clientId, conduit);\n  }\n\n  getById (id) {\n    this.debug('getting...', id);\n\n    return this._conduits[id];\n  }\n\n  exists (id) {\n    this.debug('exists?', id);\n\n    return this._conduits.hasOwnProperty(id);\n  }\n}\n","import Debug from 'debug';\nimport videojs from 'video.js';\n\nimport IOV from './iov/IOV';\n\nconst Component = videojs.getComponent('Component');\n\nconst DEBUG_PREFIX = 'skyline:clsp';\n\nexport default class MqttHandler extends Component {\n  constructor (source, tech, mqttConduitCollection, options) {\n    super(tech, options.mqtt);\n\n    this.debug = Debug(`${DEBUG_PREFIX}:MqttHandler`);\n    this.debug('constructor');\n\n    this.tech_ = tech;\n    this.source_ = source;\n\n    // @todo - is there a better way to do this where we don't pollute the\n    // top level namespace?\n    this.iov = null;\n    this.mqttConduitCollection = mqttConduitCollection;\n  }\n\n  createIOV (player) {\n    this.debug('createIOV');\n\n    this.updateIOV(IOV.fromUrl(\n      this.source_.src,\n      this.mqttConduitCollection,\n      player\n    ));\n\n    this.iov.initialize();\n  }\n\n  updateIOV (iov) {\n    this.debug('updateIOV');\n\n    if (this.iov) {\n      // If the IOV is the same, do nothing\n      if (this.iov.id === iov.id) {\n        return;\n      }\n\n      this.iov.destroy();\n    }\n\n    this.iov = iov;\n  }\n};\n","import Debug from 'debug';\nimport videojs from 'video.js';\n\nimport MqttHandler from './MqttHandler';\nimport utils from './utils';\n\nconst DEBUG_PREFIX = 'skyline:clsp';\nconst SUPPORTED_MIME_TYPE = \"video/mp4; codecs='avc1.42E01E'\";\n\nexport default function () {\n  const debug = Debug(`${DEBUG_PREFIX}:MqttSourceHandler`);\n\n  return function (mode, mqttConduitCollection) {\n    const obj = {\n      canHandleSource: function (srcObj, options = {}) {\n        debug('canHandleSource');\n\n        if (!srcObj.src) {\n          console.error('srcObj doesn\\'t contain src');\n          debug(srcObj);\n          return false;\n        }\n\n        if (!srcObj.src.startsWith('clsp')) {\n          console.error('srcObj.src is not clsp protocol');\n          return false;\n        }\n\n        if (!utils.supported()) {\n          debug('Browser not supported. Chrome 52+ is required.');\n          return false;\n        }\n\n        return obj.canPlayType(srcObj.type);\n      },\n      handleSource: function (source, tech, options = {}) {\n        debug('handleSource');\n\n        const localOptions = videojs.mergeOptions(videojs.options, options, { mqtt: { mode } });\n\n        tech.mqtt = new MqttHandler(source, tech, mqttConduitCollection, localOptions);\n\n        return tech.mqtt;\n      },\n      canPlayType: function (type) {\n        debug('canPlayType');\n\n        if (type === SUPPORTED_MIME_TYPE) {\n          return 'maybe';\n        }\n\n        console.error(`clsp type='${type}' rejected`);\n\n        return '';\n      },\n    };\n\n    return obj;\n  };\n}\n","\n'use strict';\n\nimport Debug from 'debug';\n\n// This is configured as an external library by webpack, so the caller must\n// provide videojs on `window`\nimport videojs from 'video.js';\n\nimport MqttSourceHandler from './MqttSourceHandler';\nimport MqttConduitCollection from './MqttConduitCollection';\nimport utils from './utils';\n\nconst Plugin = videojs.getPlugin('plugin');\n\nexport default (defaultOptions = {}) => class ClspPlugin extends Plugin {\n  static VERSION = utils.version;\n\n  static utils = utils;\n\n  static METRIC_TYPES = [\n    'videojs.errorRetriesCount',\n  ];\n\n  static register () {\n    if (videojs.getPlugin(utils.name)) {\n      throw new Error('You can only register the clsp plugin once, and it has already been registered.');\n    }\n\n    videojs.getTech('Html5').registerSourceHandler(MqttSourceHandler()('html5', MqttConduitCollection.factory()), 0);\n    videojs.registerPlugin(utils.name, ClspPlugin);\n\n    return ClspPlugin;\n  }\n\n  static getDefaultOptions () {\n    return {\n      /**\n       * The number of times to retry playing the video when there is an error\n       * that we know we can recover from.\n       *\n       * If a negative number is passed, retry indefinitely\n       * If 0 is passed, never retry\n       * If a positive number is passed, retry that many times\n       */\n      maxRetriesOnError: -1,\n      tourDuration: 10 * 1000,\n      enableMetrics: false,\n      videojsErrorsOptions: {},\n    };\n  }\n\n  constructor (player, options) {\n    super(player, options);\n\n    this.debug = Debug('skyline:clsp:plugin:ClspPlugin');\n    this.debug('constructing...');\n\n    const playerOptions = player.options_;\n\n    this.options = videojs.mergeOptions({\n      ...this.constructor.getDefaultOptions(),\n      ...defaultOptions,\n      ...(playerOptions.clsp || {}),\n    }, options);\n\n    this._playerOptions = playerOptions;\n    this.currentSourceIndex = 0;\n\n    player.addClass('vjs-mse-over-mqtt');\n\n    if (this.options.customClass) {\n      player.addClass(this.options.customClass);\n    }\n\n    this.resetErrors(player);\n\n    // @todo - this error doesn't work or display the way it's intended to\n    if (!utils.supported()) {\n      return player.error({\n        code: 'PLAYER_ERR_NOT_COMPAT',\n        type: 'PLAYER_ERR_NOT_COMPAT',\n        dismiss: false,\n      });\n    }\n\n    this.autoplayEnabled = playerOptions.autoplay || player.getAttribute('autoplay') === 'true';\n\n    // for debugging...\n\n    // const oldTrigger = player.trigger.bind(player);\n    // player.trigger = (eventName, ...args) => {\n    //   console.log(eventName);\n    //   console.log(...args);\n    //   oldTrigger(eventName, ...args);\n    // };\n\n    // Track the number of times we've retried on error\n    player._errorRetriesCount = 0;\n\n    // Needed to make videojs-errors think that the video is progressing\n    // If we do not do this, videojs-errors will give us a timeout error\n    player._currentTime = 0;\n    player.currentTime = () => player._currentTime++;\n\n    // @todo - are we not using videojs properly?\n    // @see - https://github.com/videojs/video.js/issues/5233\n    // @see - https://jsfiddle.net/karstenlh/96hrzp5w/\n    // This is currently needed for autoplay.\n    player.on('ready', () => {\n      if (this.autoplayEnabled) {\n        // Even though the \"ready\" event has fired, it's not actually ready\n        // until the \"next tick\"...\n        setTimeout(() => {\n          player.play();\n        });\n      }\n    });\n\n    // @todo - this seems like we aren't using videojs properly\n    player.on('error', async (event) => {\n      const error = player.error();\n\n      switch (error.code) {\n        case 0:\n        case 4:\n        case 5:\n        case 'PLAYER_ERR_IOV': {\n          break;\n        }\n        default: {\n          if (this.options.maxRetriesOnError === 0) {\n            break;\n          }\n\n          if (this.options.maxRetriesOnError < 0 || player._errorRetriesCount <= this.options.maxRetriesOnError) {\n            // @todo - when can we reset this to zero?\n            player._errorRetriesCount++;\n\n            this.resetErrors(player);\n\n            const iov = player.tech(true).mqtt.iov;\n\n            // @todo - investigate how this can be called when the iov has been destroyed\n            if (!iov || iov.destroyed || !iov.player) {\n              this.initializeIOV(player);\n            }\n            else {\n              await iov.player.restart();\n            }\n          }\n        }\n      }\n    });\n\n    // @todo - we are currently creating the IOV for this player on `firstplay`\n    // but we could do it on the `ready` event.  However, in order to support\n    // this, we need to make the IOV and its player able to be instantiated\n    // without automatically playing AND without automatically listening via\n    // a conduit\n    player.on('firstplay', (event) => {\n      this.debug('on player firstplay');\n\n      this.initializeIOV(player);\n    });\n\n    player.on('dispose', () => {\n      // @todo - destroy the tech, since it is a player-specific instance\n      try {\n        player.tech(true).mqtt.iov.destroy();\n      }\n      catch (error) {\n        // @todo - need to improve iov destroy logic...\n        console.error('Error while destroying clsp plugin instance!');\n        console.error(error);\n      }\n    });\n  }\n\n  getVideojsErrorsOptions () {\n    return {\n      timeout: 120 * 1000,\n      errors: {\n        PLAYER_ERR_NOT_COMPAT: {\n          type: 'PLAYER_ERR_NOT_COMPAT',\n          headline: 'This browser is unsupported.',\n          message: 'Chrome 52+ is required.',\n        },\n      },\n      ...this.options.videojsErrorsOptions,\n    };\n  }\n\n  resetErrors (player) {\n    // @see - https://github.com/videojs/video.js/issues/4401\n    player.error(null);\n    player.errorDisplay.close();\n\n    // Support for the videojs-errors library\n    // After an error occurs, and then we clear the error and its message\n    // above, we must re-enable videojs-errors on the player\n    if (player.errors) {\n      player.errors(this.getVideojsErrorsOptions());\n    }\n  }\n\n  onMqttHandlerError = () => {\n    const mqttHandler = this.player.tech(true).mqtt;\n\n    mqttHandler.destroy();\n\n    this.player.error({\n      // @todo - change the code to 'INSUFFICIENT_RESOURCES'\n      code: 0,\n      type: 'INSUFFICIENT_RESOURCES',\n      headline: 'Insufficient Resources',\n      message: 'The current hardware cannot support the current number of playing streams.',\n    });\n  };\n\n  initializeIOV (player) {\n    const mqttHandler = player.tech(true).mqtt;\n\n    if (!mqttHandler) {\n      throw new Error(`VideoJS Player ${player.id()} does not have mqtt tech!`);\n    }\n\n    mqttHandler.off('error', this.onMqttHandlerError);\n    mqttHandler.on('error', this.onMqttHandlerError);\n\n    mqttHandler.createIOV(player, {\n      enableMetrics: this.options.enableMetrics,\n      defaultNonSslPort: this.options.defaultNonSslPort,\n      defaultSslPort: this.options.defaultSslPort,\n    });\n  }\n\n  destroy () {\n    this.debug('destroying...');\n\n    const mqttHandler = this.player.tech(true).mqtt;\n\n    mqttHandler.off('error', this.onMqttHandlerError);\n\n    this._playerOptions = null;\n    this.currentSourceIndex = null;\n    this.debug = null;\n  }\n};\n","/*\nCreates a hidden iframe that is used to establish a dedicated mqtt websocket\nfor a single video. This is basically an in browser micro service which\nuses cross document communication to route data to and from the iframe.\n*/\n\n\n// The below string literals allow the iframe to be created completely withinjavascript allowing\n// the videojs to be completely protable.\n\n\n// this code is filled in by the gulpfile.js\nvar iframe_code = \"/*******************************************************************************\\n * Copyright (c) 2013, 2016 IBM Corp.\\n *\\n * All rights reserved. This program and the accompanying materials\\n * are made available under the terms of the Eclipse Public License v1.0\\n * and Eclipse Distribution License v1.0 which accompany this distribution.\\n *\\n * The Eclipse Public License is available at\\n *    http://www.eclipse.org/legal/epl-v10.html\\n * and the Eclipse Distribution License is available at\\n *   http://www.eclipse.org/org/documents/edl-v10.php.\\n *\\n *******************************************************************************/\\n(function(p,s){\\\"object\\\"===typeof exports&&\\\"object\\\"===typeof module?module.exports=s():\\\"function\\\"===typeof define&&define.amd?define(s):\\\"object\\\"===typeof exports?exports=s():(\\\"undefined\\\"===typeof p.Paho&&(p.Paho={}),p.Paho.MQTT=s())})(this,function(){return function(p){function s(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function u(a,b,c,k){k=s(b,c,k);D(a,c,k);return k+b}function n(a){for(var b=0,c=0;c<a.length;c++){var k=a.charCodeAt(c);2047<k?(55296<=k&&56319>=k&&(c++,b++),b+=3):127<k?b+=2:b++}return b}\\nfunction D(a,b,c){for(var k=0;k<a.length;k++){var e=a.charCodeAt(k);if(55296<=e&&56319>=e){var g=a.charCodeAt(++k);if(isNaN(g))throw Error(f(h.MALFORMED_UNICODE,[e,g]));e=(e-55296<<10)+(g-56320)+65536}127>=e?b[c++]=e:(2047>=e?b[c++]=e>>6&31|192:(65535>=e?b[c++]=e>>12&15|224:(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function E(a,b,c){for(var k=\\\"\\\",e,g=b;g<b+c;){e=a[g++];if(!(128>e)){var m=a[g++]-128;if(0>m)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),\\n\\\"\\\"]));if(224>e)e=64*(e-192)+m;else{var d=a[g++]-128;if(0>d)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16)]));if(240>e)e=4096*(e-224)+64*m+d;else{var l=a[g++]-128;if(0>l)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));if(248>e)e=262144*(e-240)+4096*m+64*d+l;else throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));}}}65535<e&&(e-=65536,k+=String.fromCharCode(55296+(e>>10)),e=56320+(e&\\n1023));k+=String.fromCharCode(e)}return k}var z=function(a,b){for(var c in a)if(a.hasOwnProperty(c))if(b.hasOwnProperty(c)){if(typeof a[c]!==b[c])throw Error(f(h.INVALID_TYPE,[typeof a[c],c]));}else{c=\\\"Unknown property, \\\"+c+\\\". Valid properties are:\\\";for(var k in b)b.hasOwnProperty(k)&&(c=c+\\\" \\\"+k);throw Error(c);}},v=function(a,b){return function(){return a.apply(b,arguments)}},h={OK:{code:0,text:\\\"AMQJSC0000I OK.\\\"},CONNECT_TIMEOUT:{code:1,text:\\\"AMQJSC0001E Connect timed out.\\\"},SUBSCRIBE_TIMEOUT:{code:2,\\ntext:\\\"AMQJS0002E Subscribe timed out.\\\"},UNSUBSCRIBE_TIMEOUT:{code:3,text:\\\"AMQJS0003E Unsubscribe timed out.\\\"},PING_TIMEOUT:{code:4,text:\\\"AMQJS0004E Ping timed out.\\\"},INTERNAL_ERROR:{code:5,text:\\\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\\\"},CONNACK_RETURNCODE:{code:6,text:\\\"AMQJS0006E Bad Connack return code:{0} {1}.\\\"},SOCKET_ERROR:{code:7,text:\\\"AMQJS0007E Socket error:{0}.\\\"},SOCKET_CLOSE:{code:8,text:\\\"AMQJS0008I Socket closed.\\\"},MALFORMED_UTF:{code:9,text:\\\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\\\"},\\nUNSUPPORTED:{code:10,text:\\\"AMQJS0010E {0} is not supported by this browser.\\\"},INVALID_STATE:{code:11,text:\\\"AMQJS0011E Invalid state {0}.\\\"},INVALID_TYPE:{code:12,text:\\\"AMQJS0012E Invalid type {0} for {1}.\\\"},INVALID_ARGUMENT:{code:13,text:\\\"AMQJS0013E Invalid argument {0} for {1}.\\\"},UNSUPPORTED_OPERATION:{code:14,text:\\\"AMQJS0014E Unsupported operation.\\\"},INVALID_STORED_DATA:{code:15,text:\\\"AMQJS0015E Invalid data in local storage key\\\\x3d{0} value\\\\x3d{1}.\\\"},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:\\\"AMQJS0016E Invalid MQTT message type {0}.\\\"},\\nMALFORMED_UNICODE:{code:17,text:\\\"AMQJS0017E Malformed Unicode string:{0} {1}.\\\"},BUFFER_FULL:{code:18,text:\\\"AMQJS0018E Message buffer is full, maximum buffer size: {0}.\\\"}},H={0:\\\"Connection Accepted\\\",1:\\\"Connection Refused: unacceptable protocol version\\\",2:\\\"Connection Refused: identifier rejected\\\",3:\\\"Connection Refused: server unavailable\\\",4:\\\"Connection Refused: bad user name or password\\\",5:\\\"Connection Refused: not authorized\\\"},f=function(a,b){var c=a.text;if(b)for(var k,e,g=0;g<b.length;g++)if(k=\\\"{\\\"+\\ng+\\\"}\\\",e=c.indexOf(k),0<e)var h=c.substring(0,e),c=c.substring(e+k.length),c=h+b[g]+c;return c},A=[0,6,77,81,73,115,100,112,3],B=[0,4,77,81,84,84,4],q=function(a,b){this.type=a;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])};q.prototype.encode=function(){var a=(this.type&15)<<4,b=0,c=[],k=0,e;void 0!==this.messageIdentifier&&(b+=2);switch(this.type){case 1:switch(this.mqttVersion){case 3:b+=A.length+3;break;case 4:b+=B.length+3}b+=n(this.clientId)+2;void 0!==this.willMessage&&(b+=n(this.willMessage.destinationName)+\\n2,e=this.willMessage.payloadBytes,e instanceof Uint8Array||(e=new Uint8Array(h)),b+=e.byteLength+2);void 0!==this.userName&&(b+=n(this.userName)+2);void 0!==this.password&&(b+=n(this.password)+2);break;case 8:for(var a=a|2,g=0;g<this.topics.length;g++)c[g]=n(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case 10:a|=2;for(g=0;g<this.topics.length;g++)c[g]=n(this.topics[g]),b+=c[g]+2;break;case 6:a|=2;break;case 3:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&\\n(a|=1);var k=n(this.payloadMessage.destinationName),h=this.payloadMessage.payloadBytes,b=b+(k+2)+h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer))}var f=b,g=Array(1),d=0;do{var t=f%128,f=f>>7;0<f&&(t|=128);g[d++]=t}while(0<f&&4>d);f=g.length+1;b=new ArrayBuffer(b+f);d=new Uint8Array(b);d[0]=a;d.set(g,1);if(3==this.type)f=u(this.payloadMessage.destinationName,k,d,f);else if(1==this.type){switch(this.mqttVersion){case 3:d.set(A,f);f+=A.length;\\nbreak;case 4:d.set(B,f),f+=B.length}a=0;this.cleanSession&&(a=2);void 0!==this.willMessage&&(a=a|4|this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));void 0!==this.userName&&(a|=128);void 0!==this.password&&(a|=64);d[f++]=a;f=s(this.keepAliveInterval,d,f)}void 0!==this.messageIdentifier&&(f=s(this.messageIdentifier,d,f));switch(this.type){case 1:f=u(this.clientId,n(this.clientId),d,f);void 0!==this.willMessage&&(f=u(this.willMessage.destinationName,n(this.willMessage.destinationName),d,f),\\nf=s(e.byteLength,d,f),d.set(e,f),f+=e.byteLength);void 0!==this.userName&&(f=u(this.userName,n(this.userName),d,f));void 0!==this.password&&u(this.password,n(this.password),d,f);break;case 3:d.set(h,f);break;case 8:for(g=0;g<this.topics.length;g++)f=u(this.topics[g],c[g],d,f),d[f++]=this.requestedQos[g];break;case 10:for(g=0;g<this.topics.length;g++)f=u(this.topics[g],c[g],d,f)}return b};var F=function(a,b,c){this._client=a;this._window=b;this._keepAliveInterval=1E3*c;this.isReset=!1;var k=(new q(12)).encode(),\\ne=function(a){return function(){return g.apply(a)}},g=function(){this.isReset?(this.isReset=!1,this._client._trace(\\\"Pinger.doPing\\\",\\\"send PINGREQ\\\"),this._client.socket.send(k),this.timeout=this._window.setTimeout(e(this),this._keepAliveInterval)):(this._client._trace(\\\"Pinger.doPing\\\",\\\"Timed out\\\"),this._client._disconnected(h.PING_TIMEOUT.code,f(h.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0;this._window.clearTimeout(this.timeout);0<this._keepAliveInterval&&(this.timeout=setTimeout(e(this),\\nthis._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(a,b,c,f,e){this._window=b;c||(c=30);this.timeout=setTimeout(function(a,b,c){return function(){return a.apply(b,c)}}(f,a,e),1E3*c);this.cancel=function(){this._window.clearTimeout(this.timeout)}},d=function(a,b,c,d,e){if(!(\\\"WebSocket\\\"in p&&null!==p.WebSocket))throw Error(f(h.UNSUPPORTED,[\\\"WebSocket\\\"]));if(!(\\\"localStorage\\\"in p&&null!==p.localStorage))throw Error(f(h.UNSUPPORTED,[\\\"localStorage\\\"]));\\nif(!(\\\"ArrayBuffer\\\"in p&&null!==p.ArrayBuffer))throw Error(f(h.UNSUPPORTED,[\\\"ArrayBuffer\\\"]));this._trace(\\\"Paho.MQTT.Client\\\",a,b,c,d,e);this.host=b;this.port=c;this.path=d;this.uri=a;this.clientId=e;this._wsuri=null;this._localKey=b+\\\":\\\"+c+(\\\"/mqtt\\\"!=d?\\\":\\\"+d:\\\"\\\")+\\\":\\\"+e+\\\":\\\";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0;for(var g in localStorage)0!==g.indexOf(\\\"Sent:\\\"+this._localKey)&&0!==\\ng.indexOf(\\\"Received:\\\"+this._localKey)||this.restore(g)};d.prototype.host=null;d.prototype.port=null;d.prototype.path=null;d.prototype.uri=null;d.prototype.clientId=null;d.prototype.socket=null;d.prototype.connected=!1;d.prototype.maxMessageIdentifier=65536;d.prototype.connectOptions=null;d.prototype.hostIndex=null;d.prototype.onConnected=null;d.prototype.onConnectionLost=null;d.prototype.onMessageDelivered=null;d.prototype.onMessageArrived=null;d.prototype.traceFunction=null;d.prototype._msg_queue=\\nnull;d.prototype._buffered_msg_queue=null;d.prototype._connectTimeout=null;d.prototype.sendPinger=null;d.prototype.receivePinger=null;d.prototype._reconnectInterval=1;d.prototype._reconnecting=!1;d.prototype._reconnectTimeout=null;d.prototype.disconnectedPublishing=!1;d.prototype.disconnectedBufferSize=5E3;d.prototype.receiveBuffer=null;d.prototype._traceBuffer=null;d.prototype._MAX_TRACE_ENTRIES=100;d.prototype.connect=function(a){var b=this._traceMask(a,\\\"password\\\");this._trace(\\\"Client.connect\\\",\\nb,this.socket,this.connected);if(this.connected)throw Error(f(h.INVALID_STATE,[\\\"already connected\\\"]));if(this.socket)throw Error(f(h.INVALID_STATE,[\\\"already connected\\\"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};d.prototype.subscribe=function(a,b){this._trace(\\\"Client.subscribe\\\",a,b);if(!this.connected)throw Error(f(h.INVALID_STATE,\\n[\\\"not connected\\\"]));var c=new q(8);c.topics=[a];c.requestedQos=void 0!==b.qos?[b.qos]:[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:f(a)})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.SUBSCRIBE_TIMEOUT.code,errorMessage:f(h.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);\\nthis._schedule_message(c)};d.prototype.unsubscribe=function(a,b){this._trace(\\\"Client.unsubscribe\\\",a,b);if(!this.connected)throw Error(f(h.INVALID_STATE,[\\\"not connected\\\"]));var c=new q(10);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.UNSUBSCRIBE_TIMEOUT.code,errorMessage:f(h.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};\\nd.prototype.send=function(a){this._trace(\\\"Client.send\\\",a);wireMessage=new q(3);wireMessage.payloadMessage=a;if(this.connected)0<a.qos?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage);else if(this._reconnecting&&this.disconnectedPublishing){if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw Error(f(h.BUFFER_FULL,\\n[this.disconnectedBufferSize]));0<a.qos?this._requires_ack(wireMessage):(wireMessage.sequence=++this._sequence,this._buffered_msg_queue.push(wireMessage))}else throw Error(f(h.INVALID_STATE,[\\\"not connected\\\"]));};d.prototype.disconnect=function(){this._trace(\\\"Client.disconnect\\\");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw Error(f(h.INVALID_STATE,[\\\"not connecting or connected\\\"]));wireMessage=new q(14);this._notify_msg_sent[wireMessage]=\\nv(this._disconnected,this);this._schedule_message(wireMessage)};d.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace(\\\"Client.getTraceLog\\\",new Date);this._trace(\\\"Client.getTraceLog in flight messages\\\",this._sentMessages.length);for(var a in this._sentMessages)this._trace(\\\"_sentMessages \\\",a,this._sentMessages[a]);for(a in this._receivedMessages)this._trace(\\\"_receivedMessages \\\",a,this._receivedMessages[a]);return this._traceBuffer}};d.prototype.startTrace=function(){null===this._traceBuffer&&\\n(this._traceBuffer=[]);this._trace(\\\"Client.startTrace\\\",new Date,\\\"1.0.3\\\")};d.prototype.stopTrace=function(){delete this._traceBuffer};d.prototype._doConnect=function(a){this.connectOptions.useSSL&&(a=a.split(\\\":\\\"),a[0]=\\\"wss\\\",a=a.join(\\\":\\\"));this._wsuri=a;this.connected=!1;this.socket=4>this.connectOptions.mqttVersion?new WebSocket(a,[\\\"mqttv3.1\\\"]):new WebSocket(a,[\\\"mqtt\\\"]);this.socket.binaryType=\\\"arraybuffer\\\";this.socket.onopen=v(this._on_socket_open,this);this.socket.onmessage=v(this._on_socket_message,\\nthis);this.socket.onerror=v(this._on_socket_error,this);this.socket.onclose=v(this._on_socket_close,this);this.sendPinger=new F(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new F(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new w(this,window,this.connectOptions.timeout,this._disconnected,[h.CONNECT_TIMEOUT.code,f(h.CONNECT_TIMEOUT)])};d.prototype._schedule_message=function(a){this._msg_queue.push(a);\\nthis.connected&&this._process_queue()};d.prototype.store=function(a,b){var c={type:b.type,messageIdentifier:b.messageIdentifier,version:1};switch(b.type){case 3:b.pubRecReceived&&(c.pubRecReceived=!0);c.payloadMessage={};for(var d=\\\"\\\",e=b.payloadMessage.payloadBytes,g=0;g<e.length;g++)d=15>=e[g]?d+\\\"0\\\"+e[g].toString(16):d+e[g].toString(16);c.payloadMessage.payloadHex=d;c.payloadMessage.qos=b.payloadMessage.qos;c.payloadMessage.destinationName=b.payloadMessage.destinationName;b.payloadMessage.duplicate&&\\n(c.payloadMessage.duplicate=!0);b.payloadMessage.retained&&(c.payloadMessage.retained=!0);0===a.indexOf(\\\"Sent:\\\")&&(void 0===b.sequence&&(b.sequence=++this._sequence),c.sequence=b.sequence);break;default:throw Error(f(h.INVALID_STORED_DATA,[key,c]));}localStorage.setItem(a+this._localKey+b.messageIdentifier,JSON.stringify(c))};d.prototype.restore=function(a){var b=localStorage.getItem(a),c=JSON.parse(b),d=new q(c.type,c);switch(c.type){case 3:for(var b=c.payloadMessage.payloadHex,e=new ArrayBuffer(b.length/\\n2),e=new Uint8Array(e),g=0;2<=b.length;){var m=parseInt(b.substring(0,2),16),b=b.substring(2,b.length);e[g++]=m}b=new Paho.MQTT.Message(e);b.qos=c.payloadMessage.qos;b.destinationName=c.payloadMessage.destinationName;c.payloadMessage.duplicate&&(b.duplicate=!0);c.payloadMessage.retained&&(b.retained=!0);d.payloadMessage=b;break;default:throw Error(f(h.INVALID_STORED_DATA,[a,b]));}0===a.indexOf(\\\"Sent:\\\"+this._localKey)?(d.payloadMessage.duplicate=!0,this._sentMessages[d.messageIdentifier]=d):0===a.indexOf(\\\"Received:\\\"+\\nthis._localKey)&&(this._receivedMessages[d.messageIdentifier]=d)};d.prototype._process_queue=function(){for(var a=null,b=this._msg_queue.reverse();a=b.pop();)this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};d.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error(\\\"Too many messages:\\\"+b);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;\\na.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;3===a.type&&this.store(\\\"Sent:\\\",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};d.prototype._on_socket_open=function(){var a=new q(1,this.connectOptions);a.clientId=this.clientId;this._socket_send(a)};d.prototype._on_socket_message=function(a){this._trace(\\\"Client._on_socket_message\\\",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};\\nd.prototype._deframeMessages=function(a){a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{for(c=0;c<a.length;){var d;a:{var e=a,g=c,m=g,n=e[g],l=n>>4,t=n&15,g=g+1,x=void 0,C=0,p=1;do{if(g==e.length){d=[null,m];break a}x=e[g++];C+=(x&127)*p;p*=128}while(0!==(x&128));x=g+C;if(x>e.length)d=[null,m];else{var y=new q(l);switch(l){case 2:e[g++]&1&&(y.sessionPresent=\\n!0);y.returnCode=e[g++];break;case 3:var m=t>>1&3,s=256*e[g]+e[g+1],g=g+2,u=E(e,g,s),g=g+s;0<m&&(y.messageIdentifier=256*e[g]+e[g+1],g+=2);var r=new Paho.MQTT.Message(e.subarray(g,x));1==(t&1)&&(r.retained=!0);8==(t&8)&&(r.duplicate=!0);r.qos=m;r.destinationName=u;y.payloadMessage=r;break;case 4:case 5:case 6:case 7:case 11:y.messageIdentifier=256*e[g]+e[g+1];break;case 9:y.messageIdentifier=256*e[g]+e[g+1],g+=2,y.returnCode=e.subarray(g,x)}d=[y,x]}}var v=d[0],c=d[1];if(null!==v)b.push(v);else break}c<\\na.length&&(this.receiveBuffer=a.subarray(c))}catch(w){d=\\\"undefined\\\"==w.hasOwnProperty(\\\"stack\\\")?w.stack.toString():\\\"No Error Stack Available\\\";this._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[w.message,d]));return}return b};d.prototype._handleMessage=function(a){this._trace(\\\"Client._handleMessage\\\",a);try{switch(a.type){case 2:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();if(this.connectOptions.cleanSession){for(var b in this._sentMessages){var c=this._sentMessages[b];\\nlocalStorage.removeItem(\\\"Sent:\\\"+this._localKey+c.messageIdentifier)}this._sentMessages={};for(b in this._receivedMessages){var d=this._receivedMessages[b];localStorage.removeItem(\\\"Received:\\\"+this._localKey+d.messageIdentifier)}this._receivedMessages={}}if(0===a.returnCode)this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this._disconnected(h.CONNACK_RETURNCODE.code,f(h.CONNACK_RETURNCODE,[a.returnCode,H[a.returnCode]]));break}a=[];for(var e in this._sentMessages)this._sentMessages.hasOwnProperty(e)&&\\na.push(this._sentMessages[e]);if(0<this._buffered_msg_queue.length){e=null;for(var g=this._buffered_msg_queue.reverse();e=g.pop();)a.push(e),this.onMessageDelivered&&(this._notify_msg_sent[e]=this.onMessageDelivered(e.payloadMessage))}a=a.sort(function(a,b){return a.sequence-b.sequence});for(var g=0,m=a.length;g<m;g++)if(c=a[g],3==c.type&&c.pubRecReceived){var n=new q(6,{messageIdentifier:c.messageIdentifier});this._schedule_message(n)}else this._schedule_message(c);if(this.connectOptions.onSuccess)this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});\\nc=!1;this._reconnecting&&(c=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(c,this._wsuri);this._process_queue();break;case 3:this._receivePublish(a);break;case 4:if(c=this._sentMessages[a.messageIdentifier])if(delete this._sentMessages[a.messageIdentifier],localStorage.removeItem(\\\"Sent:\\\"+this._localKey+a.messageIdentifier),this.onMessageDelivered)this.onMessageDelivered(c.payloadMessage);break;case 5:if(c=this._sentMessages[a.messageIdentifier])c.pubRecReceived=!0,n=new q(6,{messageIdentifier:a.messageIdentifier}),\\nthis.store(\\\"Sent:\\\",c),this._schedule_message(n);break;case 6:d=this._receivedMessages[a.messageIdentifier];localStorage.removeItem(\\\"Received:\\\"+this._localKey+a.messageIdentifier);d&&(this._receiveMessage(d),delete this._receivedMessages[a.messageIdentifier]);var l=new q(7,{messageIdentifier:a.messageIdentifier});this._schedule_message(l);break;case 7:c=this._sentMessages[a.messageIdentifier];delete this._sentMessages[a.messageIdentifier];localStorage.removeItem(\\\"Sent:\\\"+this._localKey+a.messageIdentifier);\\nif(this.onMessageDelivered)this.onMessageDelivered(c.payloadMessage);break;case 9:if(c=this._sentMessages[a.messageIdentifier]){c.timeOut&&c.timeOut.cancel();if(128===a.returnCode[0]){if(c.onFailure)c.onFailure(a.returnCode)}else if(c.onSuccess)c.onSuccess(a.returnCode);delete this._sentMessages[a.messageIdentifier]}break;case 11:if(c=this._sentMessages[a.messageIdentifier])c.timeOut&&c.timeOut.cancel(),c.callback&&c.callback(),delete this._sentMessages[a.messageIdentifier];break;case 13:this.sendPinger.reset();\\nbreak;case 14:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(t){c=\\\"undefined\\\"==t.hasOwnProperty(\\\"stack\\\")?t.stack.toString():\\\"No Error Stack Available\\\",this._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[t.message,c]))}};d.prototype._on_socket_error=function(a){this._reconnecting||this._disconnected(h.SOCKET_ERROR.code,f(h.SOCKET_ERROR,\\n[a.data]))};d.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(h.SOCKET_CLOSE.code,f(h.SOCKET_CLOSE))};d.prototype._socket_send=function(a){if(1==a.type){var b=this._traceMask(a,\\\"password\\\");this._trace(\\\"Client._socket_send\\\",b)}else this._trace(\\\"Client._socket_send\\\",a);this.socket.send(a.encode());this.sendPinger.reset()};d.prototype._receivePublish=function(a){switch(a.payloadMessage.qos){case \\\"undefined\\\":case 0:this._receiveMessage(a);break;case 1:var b=new q(4,{messageIdentifier:a.messageIdentifier});\\nthis._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store(\\\"Received:\\\",a);a=new q(5,{messageIdentifier:a.messageIdentifier});this._schedule_message(a);break;default:throw Error(\\\"Invaild qos\\\\x3d\\\"+wireMmessage.payloadMessage.qos);}};d.prototype._receiveMessage=function(a){if(this.onMessageArrived)this.onMessageArrived(a.payloadMessage)};d.prototype._connected=function(a,b){if(this.onConnected)this.onConnected(a,b)};d.prototype._reconnect=\\nfunction(){this._trace(\\\"Client._reconnect\\\");this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),128>this._reconnectInterval&&(this._reconnectInterval*=2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};d.prototype._disconnected=function(a,b){this._trace(\\\"Client._disconnected\\\",a,b);if(void 0!==a&&this._reconnecting)this._reconnectTimeout=new w(this,window,this._reconnectInterval,this._reconnect);\\nelse if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);\\nelse if(void 0===a&&(a=h.OK.code,b=f(h.OK)),this.connected){this.connected=!1;if(this.onConnectionLost)this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});a!==h.OK.code&&this.connectOptions.reconnect&&(this._reconnectInterval=1,this._reconnect())}else if(4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit)this._trace(\\\"Failed to connect V4, dropping back to V3\\\"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?\\n(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri);else if(this.connectOptions.onFailure)this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b})};d.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)\\\"undefined\\\"!==typeof arguments[a]&&arguments.splice(a,1,JSON.stringify(arguments[a]));a=Array.prototype.slice.call(arguments).join(\\\"\\\");this.traceFunction({severity:\\\"Debug\\\",message:a})}if(null!==\\nthis._traceBuffer){a=0;for(var b=arguments.length;a<b;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===a?this._traceBuffer.push(arguments[a]):\\\"undefined\\\"===typeof arguments[a]?this._traceBuffer.push(arguments[a]):this._traceBuffer.push(\\\"  \\\"+JSON.stringify(arguments[a]))}};d.prototype._traceMask=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=d==b?\\\"******\\\":a[d]);return c};var G=function(a,b,c,k){var e;if(\\\"string\\\"!==typeof a)throw Error(f(h.INVALID_TYPE,\\n[typeof a,\\\"host\\\"]));if(2==arguments.length){k=b;e=a;var g=e.match(/^(wss?):\\\\/\\\\/((\\\\[(.+)\\\\])|([^\\\\/]+?))(:(\\\\d+))?(\\\\/.*)$/);if(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"host\\\"]));}else{3==arguments.length&&(k=c,c=\\\"/mqtt\\\");if(\\\"number\\\"!==typeof b||0>b)throw Error(f(h.INVALID_TYPE,[typeof b,\\\"port\\\"]));if(\\\"string\\\"!==typeof c)throw Error(f(h.INVALID_TYPE,[typeof c,\\\"path\\\"]));e=\\\"ws://\\\"+(-1!==a.indexOf(\\\":\\\")&&\\\"[\\\"!==a.slice(0,1)&&\\\"]\\\"!==a.slice(-1)?\\\"[\\\"+a+\\\"]\\\":a)+\\\":\\\"+b+c}for(var m=\\ng=0;m<k.length;m++){var n=k.charCodeAt(m);55296<=n&&56319>=n&&m++;g++}if(\\\"string\\\"!==typeof k||65535<g)throw Error(f(h.INVALID_ARGUMENT,[k,\\\"clientId\\\"]));var l=new d(e,a,b,c,k);this._getHost=function(){return a};this._setHost=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getPort=function(){return b};this._setPort=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getPath=function(){return c};this._setPath=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getURI=function(){return e};\\nthis._setURI=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getClientId=function(){return l.clientId};this._setClientId=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getOnConnected=function(){return l.onConnected};this._setOnConnected=function(a){if(\\\"function\\\"===typeof a)l.onConnected=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onConnected\\\"]));};this._getDisconnectedPublishing=function(){return l.disconnectedPublishing};this._setDisconnectedPublishing=function(a){l.disconnectedPublishing=\\na};this._getDisconnectedBufferSize=function(){return l.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){l.disconnectedBufferSize=a};this._getOnConnectionLost=function(){return l.onConnectionLost};this._setOnConnectionLost=function(a){if(\\\"function\\\"===typeof a)l.onConnectionLost=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onConnectionLost\\\"]));};this._getOnMessageDelivered=function(){return l.onMessageDelivered};this._setOnMessageDelivered=function(a){if(\\\"function\\\"===typeof a)l.onMessageDelivered=\\na;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onMessageDelivered\\\"]));};this._getOnMessageArrived=function(){return l.onMessageArrived};this._setOnMessageArrived=function(a){if(\\\"function\\\"===typeof a)l.onMessageArrived=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onMessageArrived\\\"]));};this._getTrace=function(){return l.traceFunction};this._setTrace=function(a){if(\\\"function\\\"===typeof a)l.traceFunction=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onTrace\\\"]));};this.connect=function(a){a=a||{};z(a,\\n{timeout:\\\"number\\\",userName:\\\"string\\\",password:\\\"string\\\",willMessage:\\\"object\\\",keepAliveInterval:\\\"number\\\",cleanSession:\\\"boolean\\\",useSSL:\\\"boolean\\\",invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",hosts:\\\"object\\\",ports:\\\"object\\\",reconnect:\\\"boolean\\\",mqttVersion:\\\"number\\\",mqttVersionExplicit:\\\"boolean\\\",uris:\\\"object\\\"});void 0===a.keepAliveInterval&&(a.keepAliveInterval=60);if(4<a.mqttVersion||3>a.mqttVersion)throw Error(f(h.INVALID_ARGUMENT,[a.mqttVersion,\\\"connectOptions.mqttVersion\\\"]));void 0===\\na.mqttVersion?(a.mqttVersionExplicit=!1,a.mqttVersion=4):a.mqttVersionExplicit=!0;if(void 0!==a.password&&void 0===a.userName)throw Error(f(h.INVALID_ARGUMENT,[a.password,\\\"connectOptions.password\\\"]));if(a.willMessage){if(!(a.willMessage instanceof r))throw Error(f(h.INVALID_TYPE,[a.willMessage,\\\"connectOptions.willMessage\\\"]));a.willMessage.stringPayload=null;if(\\\"undefined\\\"===typeof a.willMessage.destinationName)throw Error(f(h.INVALID_TYPE,[typeof a.willMessage.destinationName,\\\"connectOptions.willMessage.destinationName\\\"]));\\n}\\\"undefined\\\"===typeof a.cleanSession&&(a.cleanSession=!0);if(a.hosts){if(!(a.hosts instanceof Array))throw Error(f(h.INVALID_ARGUMENT,[a.hosts,\\\"connectOptions.hosts\\\"]));if(1>a.hosts.length)throw Error(f(h.INVALID_ARGUMENT,[a.hosts,\\\"connectOptions.hosts\\\"]));for(var b=!1,d=0;d<a.hosts.length;d++){if(\\\"string\\\"!==typeof a.hosts[d])throw Error(f(h.INVALID_TYPE,[typeof a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));if(/^(wss?):\\\\/\\\\/((\\\\[(.+)\\\\])|([^\\\\/]+?))(:(\\\\d+))?(\\\\/.*)$/.test(a.hosts[d]))if(0===d)b=!0;else{if(!b)throw Error(f(h.INVALID_ARGUMENT,\\n[a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));}else if(b)throw Error(f(h.INVALID_ARGUMENT,[a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));}if(b)a.uris=a.hosts;else{if(!a.ports)throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));if(!(a.ports instanceof Array))throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));if(a.hosts.length!==a.ports.length)throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));a.uris=[];for(d=0;d<a.hosts.length;d++){if(\\\"number\\\"!==typeof a.ports[d]||\\n0>a.ports[d])throw Error(f(h.INVALID_TYPE,[typeof a.ports[d],\\\"connectOptions.ports[\\\"+d+\\\"]\\\"]));var b=a.hosts[d],g=a.ports[d];e=\\\"ws://\\\"+(-1!==b.indexOf(\\\":\\\")?\\\"[\\\"+b+\\\"]\\\":b)+\\\":\\\"+g+c;a.uris.push(e)}}}l.connect(a)};this.subscribe=function(a,b){if(\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+a);b=b||{};z(b,{qos:\\\"number\\\",invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",timeout:\\\"number\\\"});if(b.timeout&&!b.onFailure)throw Error(\\\"subscribeOptions.timeout specified with no onFailure callback.\\\");\\nif(\\\"undefined\\\"!==typeof b.qos&&0!==b.qos&&1!==b.qos&&2!==b.qos)throw Error(f(h.INVALID_ARGUMENT,[b.qos,\\\"subscribeOptions.qos\\\"]));l.subscribe(a,b)};this.unsubscribe=function(a,b){if(\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+a);b=b||{};z(b,{invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",timeout:\\\"number\\\"});if(b.timeout&&!b.onFailure)throw Error(\\\"unsubscribeOptions.timeout specified with no onFailure callback.\\\");l.unsubscribe(a,b)};this.send=function(a,b,c,d){var e;if(0===\\narguments.length)throw Error(\\\"Invalid argument.length\\\");if(1==arguments.length){if(!(a instanceof r)&&\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+typeof a);e=a;if(\\\"undefined\\\"===typeof e.destinationName)throw Error(f(h.INVALID_ARGUMENT,[e.destinationName,\\\"Message.destinationName\\\"]));}else e=new r(b),e.destinationName=a,3<=arguments.length&&(e.qos=c),4<=arguments.length&&(e.retained=d);l.send(e)};this.publish=function(a,b,c,d){console.log(\\\"Publising message to: \\\",a);var e;if(0===arguments.length)throw Error(\\\"Invalid argument.length\\\");\\nif(1==arguments.length){if(!(a instanceof r)&&\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+typeof a);e=a;if(\\\"undefined\\\"===typeof e.destinationName)throw Error(f(h.INVALID_ARGUMENT,[e.destinationName,\\\"Message.destinationName\\\"]));}else e=new r(b),e.destinationName=a,3<=arguments.length&&(e.qos=c),4<=arguments.length&&(e.retained=d);l.send(e)};this.disconnect=function(){l.disconnect()};this.getTraceLog=function(){return l.getTraceLog()};this.startTrace=function(){l.startTrace()};this.stopTrace=\\nfunction(){l.stopTrace()};this.isConnected=function(){return l.connected}};G.prototype={get host(){return this._getHost()},set host(a){this._setHost(a)},get port(){return this._getPort()},set port(a){this._setPort(a)},get path(){return this._getPath()},set path(a){this._setPath(a)},get clientId(){return this._getClientId()},set clientId(a){this._setClientId(a)},get onConnected(){return this._getOnConnected()},set onConnected(a){this._setOnConnected(a)},get disconnectedPublishing(){return this._getDisconnectedPublishing()},\\nset disconnectedPublishing(a){this._setDisconnectedPublishing(a)},get disconnectedBufferSize(){return this._getDisconnectedBufferSize()},set disconnectedBufferSize(a){this._setDisconnectedBufferSize(a)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(a){this._setOnConnectionLost(a)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(a){this._setOnMessageDelivered(a)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(a){this._setOnMessageArrived(a)},\\nget trace(){return this._getTrace()},set trace(a){this._setTrace(a)}};var r=function(a){var b;if(\\\"string\\\"===typeof a||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw f(h.INVALID_ARGUMENT,[a,\\\"newPayload\\\"]);this._getPayloadString=function(){return\\\"string\\\"===typeof b?b:E(b,0,b.length)};this._getPayloadBytes=\\nfunction(){if(\\\"string\\\"===typeof b){var a=new ArrayBuffer(n(b)),a=new Uint8Array(a);D(b,a,0);return a}return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(\\\"string\\\"===typeof a)c=a;else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"newDestinationName\\\"]));};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(0===a||1===a||2===a)d=a;else throw Error(\\\"Invalid argument:\\\"+a);};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(\\\"boolean\\\"===\\ntypeof a)e=a;else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"newRetained\\\"]));};var g=!1;this._getDuplicate=function(){return g};this._setDuplicate=function(a){g=a}};r.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(a){this._setDestinationName(a)},get topic(){return this._getDestinationName()},set topic(a){this._setDestinationName(a)},get qos(){return this._getQos()},\\nset qos(a){this._setQos(a)},get retained(){return this._getRetained()},set retained(a){this._setRetained(a)},get duplicate(){return this._getDuplicate()},set duplicate(a){this._setDuplicate(a)}};return{Client:G,Message:r}}(window)});\\nfunction _clspRouter() {\\n    function send(m){\\n        // route message to parent which will in turn route to the correct\\n        // player based on clientId.\\n        m.clientId = MqttClientId;\\n        window.parent.postMessage(m,\\\"*\\\");\\n    }// end send\\n\\n\\n    function routeInbound(message){\\n        var pstring = \\\"\\\";\\n\\n        try {\\n            pstring = message.payloadString;\\n        } catch(e) {\\n            //bogus excepton?\\n        }\\n\\n        send({\\n          event: \\'data\\',\\n          destinationName: message.destinationName,\\n          payloadString: pstring,\\n          payloadBytes: message.payloadBytes || null\\n        });\\n    }// end route inbound\\n\\n    function disconnect () {\\n        var ERROR_CODE_NOT_CONNECTED = \\'AMQJS0011E\\';\\n\\n        try {\\n            MQTTClient.disconnect();\\n        } catch (e) {\\n            if (!e.message.startsWith(ERROR_CODE_NOT_CONNECTED)) {\\n                console.error(e);\\n            }\\n        }\\n    }\\n\\n    function eventHandler(evt){\\n        var m = evt.data;\\n\\n        try {\\n            if (m.method === \\'subscribe\\') {\\n                MQTTClient.subscribe(m.topic);\\n            } else if (m.method === \\'unsubscribe\\') {\\n                MQTTClient.unsubscribe(m.topic);\\n            } else if (m.method === \\'publish\\') {\\n                var mqtt_payload = null;\\n                try {\\n                    mqtt_payload = JSON.stringify(m.data);\\n                } catch( json_error ) {\\n                    console.error(\\\"json stringify error: \\\" + m.data);\\n                    return;\\n                }\\n\\n                var mqtt_msg = new Paho.MQTT.Message(mqtt_payload);\\n                mqtt_msg.destinationName = m.topic;\\n                MQTTClient.send(mqtt_msg);\\n            } else if (m.method === \\'connect\\') {\\n                connect();\\n            } else if (m.method === \\'disconnect\\') {\\n                disconnect();\\n            }\\n        } catch(e) {\\n            // we are dead!\\n           send({\\n               event: \\'fail\\',\\n               reason: \\\"network failure\\\"\\n            });\\n\\n            disconnect();\\n        }\\n\\n    }\\n\\n    function AppReady() {\\n        window.removeEventListener(\\\"message\\\", eventHandler);\\n        window.addEventListener(\\\"message\\\", eventHandler, false);\\n\\n        send({\\n          event: \\'ready\\'\\n        });\\n\\n        if (Reconnect !== -1)\\n        {\\n            clearInterval(Reconnect);\\n            Reconnect = -1;\\n        }\\n\\n    }// application ready\\n\\n\\n    function AppFail(message) {\\n      var e = \\\"Error code \\\" +\\n          parseInt(message.errorCode) + \\\": \\\" + message.errorMessage;\\n      send({\\n        event: \\'fail\\',\\n        reason: e\\n      });\\n    }\\n\\n    MQTTClient = new Paho.MQTT.Client(\\n        MqttIp,\\n        MqttPort,\\n        MqttClientId\\n    );\\n\\n    /*\\n     * Hold the id of the reconnect interval task\\n     */\\n    var Reconnect = -1;\\n\\n    /*\\n     * Callback which gets called when the connection is lost\\n     */\\n    function onConnectionLost(message){\\n        if (message.errorCode === 0) {\\n            return;\\n        }\\n\\n        send({\\n            event: \\'fail\\',\\n            reason: \\\"connection lost error code \\\" + parseInt(message.errorCode)\\n        });\\n        if (Reconnect === -1) {\\n            Reconnect = setInterval(function () {\\n                connect();\\n            }, 2000);\\n        }\\n    }\\n\\n    MQTTClient.onConnectionLost = onConnectionLost;\\n\\n    // perhaps the busiest function in this module ;)\\n    MQTTClient.onMessageArrived = function(message) {\\n        try {\\n             routeInbound(message);\\n        }catch(e) {\\n            if (e) {\\n                console.error(e);\\n            }\\n        }\\n    };\\n\\n    /**\\n     * Connect to MQTT...\\n     */\\n    function connect()\\n    {\\n        // setup connection options\\n        var options = {\\n            timeout: 120,\\n            onSuccess:  AppReady,\\n            onFailure: AppFail\\n        };\\n        // last will message sent on disconnect\\n        var willmsg = new Paho.MQTT.Message(JSON.stringify({\\n            clientId: MqttClientId\\n        }));\\n        willmsg.destinationName = \\\"iov/clientDisconnect\\\";\\n        options.willMessage = willmsg;\\n\\n        if (MqttUseSSL === true) {\\n            options.useSSL = true;\\n        }\\n\\n        try {\\n            MQTTClient.connect(options);\\n        } catch(e) {\\n            var ERROR_CODE_ALREADY_CONNECTED = \\'AMQJS0011E\\';\\n\\n            if (!e.message.startsWith(ERROR_CODE_ALREADY_CONNECTED)) {\\n                console.error(\\\"connect failed\\\", e);\\n                send({\\n                    event: \\'fail\\',\\n                    reason: \\\"connect failed\\\"\\n                });\\n            }\\n        }\\n    }\\n\\n    connect();\\n}\\n\\nfunction clspRouter() {\\n    try {\\n        _clspRouter();\\n    } catch(e) {\\n        console.error(\\\"IFRAME error\\\");\\n        console.error(e);\\n    }\\n}\\n\\nfunction onunload()\\n{\\n    if (typeof MQTTClient !== \\'undefined\\') {\\n        try {\\n            MQTTClient.disconnect();\\n        } catch (e) {\\n            if (!e.message.startsWith(\\'AMQJS0011E\\')) {\\n                console.error(e);\\n            }\\n        }\\n    }\\n}\\n\";\n\n\n\nfunction pframe_client(iframe, iov) {\n    var self = {\n        dispatch: {},\n        iov: iov\n    };\n\n\n    // primitive function that routes message to iframe\n    function command(m) {\n\n        if (iframe.contentWindow !== null) {\n            iframe.contentWindow.postMessage(m,\"*\");\n            return;\n        }\n\n        var t = setInterval(function(){\n            if (iframe.contentWindow !== null) {\n                iframe.contentWindow.postMessage(m,\"*\");\n                clearInterval(t);\n            }\n        },1000);\n    }\n\n    /* message from mqttRouter routeInbound go handler which associates this\n       client with the clientId. It then calls self.inboundHandler handler to\n       process the message from the iframe.\n    */\n    self.inboundHandler = function(message) {\n        var handler = self.dispatch[message.destinationName];\n        if ( typeof handler !== 'undefined'){\n             try {\n                handler(message);\n             } catch( e ) {\n                console.error( e );\n             }\n        } else {\n            console.error(\"No handler for \" + message.destinationName);\n        }\n    };\n\n    self.subscribe = function(topic, callback) {\n        self.dispatch[topic] = callback;\n        command({\n            method: \"subscribe\",\n            topic: topic\n        });\n    };\n\n    self.unsubscribe = function(topic) {\n        if ( topic in self.dispatch ){\n            delete self.dispatch[topic];\n        }\n        command({\n            method: \"unsubscribe\",\n            topic: topic\n        });\n    };\n\n    self.publish = function(topic, data){\n      command({\n          method: \"publish\",\n          topic: topic,\n          data: data\n      });\n    };\n\n    self.connect = function () {\n        command({\n            method: \"connect\"\n        });\n    };\n\n    self.disconnect = function () {\n        command({\n            method: \"disconnect\"\n        });\n    };\n\n    self.transaction = function( topic, callback, obj ) {\n        obj.resp_topic = iov.config.clientId + \"/response/\"+parseInt(Math.random()*1000000);\n        self.subscribe(obj.resp_topic,function(mqtt_resp){\n            //call user specified callback to handle response from remote process\n            var resp = JSON.parse(mqtt_resp.payloadString);\n            // call user specified callback to handle response\n            callback(resp);\n            // cleanup.\n            self.unsubscribe(obj.resp_topic);\n        });\n\n        // start transaction\n        //MQTTClient.send(mqtt_msg);\n        self.publish(topic, obj );\n    };\n\n    // return client for video player.\n    return self;\n}\n\n\nwindow.mqttConduit = function (iov) {\n    var iframe = document.createElement('iframe');\n    var MqttUseSSL = (iov.config.useSSL || false) ? \"true\": \"false\";\n\n    var markup =\n        '<html><head>'+\n        '<script>\\n' +\n            \"var MqttIp = '\" + iov.config.wsbroker + \"' ; \\n\" +\n            \"var MqttPort = \" + iov.config.wsport + \"; \\n\" +\n            \"var MqttUseSSL = \" + MqttUseSSL + \"; \\n\" +\n            \"var MqttClientId = '\" + iov.config.clientId + \"' ; \\n\" +\n            \"var Origin = '\" + window.location.origin + \"' ; \\n\" +\n            iframe_code + '\\n' +\n        '</script>\\n' +\n        '</head><body onload=\"clspRouter();\" onunload=\"onunload();\"><body>'+\n        '<div id=\"message\"></div>'+\n        '</body></html>'\n    ;\n\n\n\n    // inject code into iframe\n    iframe.srcdoc = markup;\n\n    iframe.width = 0;\n    iframe.height = 0;\n    iframe.setAttribute('style','display:none;');\n    iframe.setAttribute('id',iov.config.clientId);\n\n\n    // attach hidden iframe to player\n    //document.body.appendChild(iframe);\n    if (iov.config.videoElementParent !== null) {\n        iov.config.videoElementParent.appendChild(iframe);\n    } else if (iov.videoElement.parentNode !== null) {\n        iov.videoElement.parentNode.appendChild(iframe);\n        iov.config.videoElementParent = iov.videoElement.parentNode;\n    } else {\n        var t = setInterval(function(){\n            if (iov.videoElement.parentNode !== null) {\n                iov.videoElement.parentNode.appendChild(iframe);\n                iov.config.videoElementParent = iov.videoElement.parentNode;\n                clearInterval(t);\n            }\n        },1000);\n    }\n\n\n    return pframe_client(iframe, iov);\n}\n","import Debug from 'debug';\nimport uuidv4 from 'uuid/v4';\n\nimport MqttTopicHandlers from './MqttTopicHandlers';\nimport IOVPlayer from './player';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\n/**\n * Internet of Video client. This module uses the MediaSource API to\n * deliver video content streamed through MQTT from distributed sources.\n */\n\n//  @todo - should this be the videojs component?  it seems like the\n// mqttHandler does nothing, and that this could replace it\nexport default class IOV {\n  static CHANGE_SOURCE_MAX_WAIT = 5000;\n\n  static compatibilityCheck () {\n    // @todo - shouldn't this be done in the utils function?\n    // @todo - does this need to throw an error?\n    // For the MAC\n    var NoMediaSourceAlert = false;\n\n    window.MediaSource = window.MediaSource || window.WebKitMediaSource;\n\n    if (!window.MediaSource) {\n      if (NoMediaSourceAlert === false) {\n        window.alert('Media Source Extensions not supported in your browser: Claris Live Streaming will not work!');\n      }\n\n      NoMediaSourceAlert = true;\n    }\n  }\n\n  static generateConfigFromUrl (url) {\n    if (!url) {\n      throw new Error('No source was given to be parsed!');\n    }\n\n    // We use an anchor tag here beacuse, when an href is added to\n    // an anchor dom Element, the parsing is done for you by the\n    // browser.\n    const parser = document.createElement('a');\n\n    let useSSL;\n    let default_port;\n\n    // Chrome is the only browser that allows non-http protocols in\n    // the anchor tag's href, so change them all to http here so we\n    // get the benefits of the anchor tag's parsing\n    if (url.substring(0, 5).toLowerCase() === 'clsps') {\n      useSSL = true;\n      parser.href = url.replace('clsps', 'https');\n      default_port = 443;\n    }\n    else if (url.substring(0, 4).toLowerCase() === 'clsp') {\n      useSSL = false;\n      parser.href = url.replace('clsp', 'http');\n      default_port = 9001;\n    }\n    else {\n      throw new Error('The given source is not a clsp url, and therefore cannot be parsed.');\n    }\n\n    const paths = parser.pathname.split('/');\n    const streamName = paths[paths.length - 1];\n\n    let hostname = parser.hostname;\n    let port = parser.port;\n\n    if (port.length === 0) {\n      port = default_port;\n    }\n\n    // @ is a special address meaning the server that loaded the web page.\n    if (hostname === '@') {\n      hostname = window.location.hostname;\n    }\n\n    return {\n      // url,\n      wsbroker: hostname,\n      wsport: parseInt(port),\n      streamName,\n      useSSL,\n    };\n  }\n\n  static factory (mqttConduitCollection, player, config = {}) {\n    return new IOV(mqttConduitCollection, player, config);\n  }\n\n  static fromUrl (url, mqttConduitCollection, player, config = {}) {\n    return IOV.factory(mqttConduitCollection, player, {\n      ...config,\n      ...IOV.generateConfigFromUrl(url),\n    });\n  }\n\n  constructor (mqttConduitCollection, player, config) {\n    IOV.compatibilityCheck();\n\n    this.id = uuidv4();\n\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:main`);\n    this.debug('constructor');\n\n    this.destroyed = false;\n    this.onReadyAlreadyCalled = false;\n    this.playerInstance = player;\n    this.videoElement = this.playerInstance.el();\n\n    this.config = {\n      clientId: this.id,\n      wsbroker: config.wsbroker,\n      wsport: config.wsport,\n      useSSL: config.useSSL,\n      streamName: config.streamName,\n      appStart: config.appStart,\n      videoElementParent: config.videoElementParent || null,\n      changeSourceMaxWait: config.changeSourceMaxWait || IOV.CHANGE_SOURCE_MAX_WAIT,\n    };\n\n    this.statsMsg = {\n      byteCount: 0,\n      inkbps: 0,\n      host: document.location.host,\n      clientId: this.config.clientId,\n    };\n\n    // @todo - this needs to be a global service or something\n    this.mqttConduitCollection = mqttConduitCollection;\n\n    // handle inbound messages from MQTT, including video\n    // and distributes them to players.\n    this.mqttTopicHandlers = new MqttTopicHandlers(this.id, this);\n\n    this.events = {\n      connection_lost: (responseObject) => {\n        // @todo - close all players and display an error message\n        console.error('MQTT connection lost');\n        console.error(responseObject);\n      },\n\n      // @todo - does this ever get fired?\n      on_message: this.mqttTopicHandlers.msghandler,\n\n      // generic exception handler\n      exception: (text, e) => {\n        console.error(text);\n        if (typeof e !== 'undefined') {\n          console.error(e.stack);\n        }\n      },\n    };\n  }\n\n  initialize () {\n    this.conduit = this.mqttConduitCollection.addFromIov(this);\n    this.player = IOVPlayer.factory(this, this.playerInstance);\n  }\n\n  clone (config) {\n    this.debug('clone');\n\n    const cloneConfig = {\n      ...config,\n      videoElementParent: this.config.videoElementParent,\n    };\n\n    // @todo - is it possible to reuse the iov player?\n    return IOV.factory(\n      this.mqttConduitCollection,\n      this.playerInstance,\n      cloneConfig\n    );\n  }\n\n  cloneFromUrl (url, config = {}) {\n    this.debug('cloneFromUrl');\n\n    return this.clone({\n      ...IOV.generateConfigFromUrl(url),\n      ...config,\n    });\n  }\n\n  // query remote server and get a list of all stream names\n  getAvailableStreams (callback) {\n    this.debug('getAvailableStreams');\n\n    this.conduit.transaction('iov/video/list', callback, {});\n  }\n\n  onChangeSource (url) {\n    this.debug(`changeSource on player \"${this.id}\"\"`);\n\n    if (!url) {\n      throw new Error('Unable to change source because there is no url!');\n    }\n\n    const clone = this.cloneFromUrl(url);\n\n    clone.initialize();\n\n    // When the tab is not in focus, chrome doesn't handle things the same\n    // way as when the tab is in focus, and it seems that the result of that\n    // is that the \"firstFrameShown\" event never fires.  Having the IOV be\n    // updated on a delay in case the \"firstFrameShown\" takes too long will\n    // ensure that the old IOVs are destroyed, ensuring that unnecessary\n    // socket connections, etc. are not being used, as this can cause the\n    // browser to crash.\n    // Note that if there is a better way to do this, it would likely reduce\n    // the number of try/catch blocks and null checks in the IOVPlayer and\n    // MSEWrapper, but I don't think that is likely to happen until the MSE\n    // is standardized, and even then, we may be subject to non-intuitive\n    // behavior based on tab switching, etc.\n    setTimeout(() => {\n      clone.playerInstance.tech(true).mqtt.updateIOV(clone);\n    }, clone.config.changeSourceMaxWait);\n\n    // Under normal circumstances, meaning when the tab is in focus, we want\n    // to respond by switching the IOV when the new IOV Player has something\n    // to display\n    clone.player.on('firstFrameShown', () => {\n      clone.playerInstance.tech(true).mqtt.updateIOV(clone);\n    });\n  }\n\n  onReady (event) {\n    this.debug('onReady');\n\n    // @todo - why is this necessary?\n    if (this.videoElement.parentNode !== null) {\n      this.config.videoElementParentId = this.videoElement.parentNode.id;\n    }\n\n    const videoTag = this.playerInstance.children()[0];\n\n    // @todo - there must be a better way to determine autoplay...\n    if (videoTag.getAttribute('autoplay') !== null) {\n      // playButton.trigger('click');\n      this.playerInstance.trigger('play', videoTag);\n    }\n\n    if (this.onReadyAlreadyCalled) {\n      console.warn('tried to use this player more than once...');\n      return;\n    }\n\n    this.onReadyAlreadyCalled = true;\n\n    this.player.on('firstFrameShown', () => {\n      this.playerInstance.loadingSpinner.hide();\n\n      videoTag.style.display = 'none';\n    });\n\n    this.player.on('videoReceived', () => {\n      // reset the timeout monitor from videojs-errors\n      this.playerInstance.trigger('timeupdate');\n    });\n\n    this.player.on('videoInfoReceived', () => {\n      // reset the timeout monitor from videojs-errors\n      this.playerInstance.trigger('timeupdate');\n    });\n\n    this.playerInstanceEventListeners = {\n      changesrc: (event, { url }) => this.onChangeSource(url),\n    };\n\n    this.playerInstance.on('changesrc', this.playerInstanceEventListeners.changesrc);\n\n    if (!document.hidden) {\n      this.player.play();\n    }\n\n    this.videoElement.addEventListener('mse-error-event', async (e) => {\n      await this.player.restart();\n    }, false);\n\n    // the mse service will stop streaming to us if we don't send\n    // a message to iov/stats within 1 minute.\n    this._statsTimer = setInterval(() => {\n      this.statsMsg.inkbps = (this.statsMsg.byteCount * 8) / 30000.0;\n      this.statsMsg.byteCount = 0;\n\n      this.conduit.publish('iov/stats', this.statsMsg);\n\n      this.debug('iov status', this.statsMsg);\n    }, 5000);\n  }\n\n  onFail (event) {\n    this.debug('onFail');\n\n    // when a stream fails, it no longer needs to send stats to the\n    // server, and it may not even be connected to the server\n    clearInterval(this._statsTimer);\n\n    this.debug('network error', event.data.reason);\n    this.playerInstance.trigger('network-error', event.data.reason);\n  }\n\n  onData (event) {\n    this.debug('onData');\n\n    this.conduit.inboundHandler(event.data);\n  }\n\n  onMessage (event) {\n    const eventType = event.data.event;\n\n    this.debug('onMessage', eventType);\n\n    switch (eventType) {\n      case 'ready': {\n        this.onReady(event);\n        break;\n      }\n      case 'fail': {\n        this.onFail(event);\n        break;\n      }\n      case 'data': {\n        this.onData(event);\n        break;\n      }\n      default: {\n        console.error(`No match for event: ${eventType}`);\n      }\n    }\n  }\n\n  destroy () {\n    this.debug('destroy');\n\n    if (this.destroyed) {\n      return;\n    }\n\n    this.destroyed = true;\n\n    clearInterval(this._statsTimer);\n\n    // this.playerInstanceEventListeners will not be defined if the iov is\n    // destroyed too early\n    if (this.playerInstanceEventListeners) {\n      this.playerInstance.off('changesrc', this.playerInstanceEventListeners.changesrc);\n    }\n\n    this.player.destroy();\n\n    this.playerInstance = null;\n    this.player = null;\n\n    this.mqttConduitCollection.remove(this.id);\n\n    const iframe = document.getElementById(this.config.clientId);\n    iframe.parentNode.removeChild(iframe);\n    iframe.srcdoc = '';\n  }\n};\n","'use strict';\n\nimport Debug from 'debug';\nimport defaults from 'lodash/defaults';\nimport noop from 'lodash/noop';\n// import { mp4toJSON } from './mp4-inspect';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\nconst debug = Debug(`${DEBUG_PREFIX}:MSEWrapper`);\nconst silly = Debug(`silly:${DEBUG_PREFIX}:MSEWrapper`);\n\n// This is the original error text, but it is subject to change by chrome,\n// and we are only checking the part of the error text that contains no\n// punctuation (and is all lower case).\n// \"Failed to execute 'appendBuffer' on 'SourceBuffer': The SourceBuffer is full, and cannot free space to append additional buffers.\";\nconst FULL_BUFFER_ERROR = 'and cannot free space to append additional buffers';\n\nexport default class MSEWrapper {\n  static EVENT_NAMES = [\n    'metric',\n  ];\n\n  static METRIC_TYPES = [\n    'mediaSource.created',\n    'mediaSource.destroyed',\n    'objectURL.created',\n    'objectURL.revoked',\n    'mediaSource.reinitialized',\n    'sourceBuffer.created',\n    'sourceBuffer.destroyed',\n    'queue.added',\n    'queue.removed',\n    'sourceBuffer.append',\n    'error.sourceBuffer.append',\n    'frameDrop.hiddenTab',\n    'queue.mediaSourceNotReady',\n    'queue.sourceBufferNotReady',\n    'queue.shift',\n    'queue.append',\n    'sourceBuffer.lastKnownBufferSize',\n    'sourceBuffer.trim',\n    'sourceBuffer.trim.error',\n    'sourceBuffer.updateEnd',\n    'sourceBuffer.updateEnd.bufferLength.empty',\n    'sourceBuffer.updateEnd.bufferLength.error',\n    'sourceBuffer.updateEnd.removeEvent',\n    'sourceBuffer.updateEnd.appendEvent',\n    'sourceBuffer.updateEnd.bufferFrozen',\n    'sourceBuffer.abort',\n    'error.sourceBuffer.abort',\n    'sourceBuffer.lastMoofSize',\n  ];\n\n  static isMimeCodecSupported (mimeCodec) {\n    return (window.MediaSource && window.MediaSource.isTypeSupported(mimeCodec));\n  }\n\n  static factory (videoElement, options = {}) {\n    return new MSEWrapper(videoElement, options);\n  }\n\n  constructor (videoElement, options = {}) {\n    debug('Constructing...');\n\n    if (!videoElement) {\n      throw new Error('videoElement is required to construct an MSEWrapper.');\n    }\n\n    this.destroyed = false;\n\n    this.videoElement = videoElement;\n\n    this.options = defaults({}, options, {\n      // These default buffer value provide the best results in my testing.\n      // It keeps the memory usage as low as is practical, and rarely causes\n      // the video to stutter\n      bufferSizeLimit: 90 + Math.floor(Math.random() * (200)),\n      bufferTruncateFactor: 2,\n      bufferTruncateValue: null,\n      driftThreshold: 2000,\n      duration: 10,\n      enableMetrics: false,\n    });\n\n    this.segmentQueue = [];\n    this.sequenceNumber = 0;\n\n    this.mediaSource = null;\n    this.sourceBuffer = null;\n    this.objectURL = null;\n    this.timeBuffered = null;\n\n    if (!this.options.bufferTruncateValue) {\n      this.options.bufferTruncateValue = parseInt(this.options.bufferSizeLimit / this.options.bufferTruncateFactor);\n    }\n\n    this.metrics = {};\n\n    // @todo - there must be a more proper way to do events than this...\n    this.events = {};\n\n    for (let i = 0; i < MSEWrapper.EVENT_NAMES.length; i++) {\n      this.events[MSEWrapper.EVENT_NAMES[i]] = [];\n    }\n\n    this.eventListeners = {\n      mediaSource: {},\n      sourceBuffer: {},\n    };\n  }\n\n  on (name, action) {\n    debug(`Registering Listener for ${name} event...`);\n\n    if (!MSEWrapper.EVENT_NAMES.includes(name)) {\n      throw new Error(`\"${name}\" is not a valid event.\"`);\n    }\n\n    this.events[name].push(action);\n  }\n\n  trigger (name, value) {\n    if (name === 'metric') {\n      silly(`Triggering ${name} event...`);\n    }\n    else {\n      debug(`Triggering ${name} event...`);\n    }\n\n    if (!MSEWrapper.EVENT_NAMES.includes(name)) {\n      throw new Error(`\"${name}\" is not a valid event.\"`);\n    }\n\n    for (let i = 0; i < this.events[name].length; i++) {\n      this.events[name][i](value, this);\n    }\n  }\n\n  metric (type, value) {\n    if (!this.options || !this.options.enableMetrics) {\n      return;\n    }\n\n    if (!MSEWrapper.METRIC_TYPES.includes(type)) {\n      // @todo - should this throw?\n      return;\n    }\n\n    switch (type) {\n      case 'sourceBuffer.lastKnownBufferSize':\n      case 'sourceBuffer.lastMoofSize': {\n        this.metrics[type] = value;\n        break;\n      }\n      default: {\n        if (!this.metrics.hasOwnProperty(type)) {\n          this.metrics[type] = 0;\n        }\n\n        this.metrics[type] += value;\n      }\n    }\n\n    this.trigger('metric', {\n      type,\n      value: this.metrics[type],\n    });\n  }\n\n  initializeMediaSource (options = {}) {\n    debug('Initializing mediaSource...');\n\n    options = defaults({}, options, {\n      onSourceOpen: noop,\n      onSourceEnded: noop,\n      onError: noop,\n    });\n\n    this.metric('mediaSource.created', 1);\n\n    // Kill the existing media source\n    this.destroyMediaSource();\n\n    this.mediaSource = new window.MediaSource();\n\n    this.eventListeners.mediaSource.sourceopen = () => {\n      // This can only be set when the media source is open.\n      // @todo - does this do memory management for us so we don't have\n      // to call remove on the buffer, which is expensive?  It seems\n      // like it...\n      this.mediaSource.duration = this.options.duration;\n\n      options.onSourceOpen();\n    };\n    this.eventListeners.mediaSource.sourceended = options.onSourceEnded;\n    this.eventListeners.mediaSource.error = options.onError;\n\n    this.mediaSource.addEventListener('sourceopen', this.eventListeners.mediaSource.sourceopen);\n    this.mediaSource.addEventListener('sourceended', this.eventListeners.mediaSource.sourceended);\n    this.mediaSource.addEventListener('error', this.eventListeners.mediaSource.error);\n  }\n\n  getVideoElementSrc () {\n    debug('getVideoElementSrc...');\n\n    if (!this.mediaSource) {\n      // @todo - should this throw?\n      return;\n    }\n\n    // @todo - should multiple calls to this method with the same mediaSource\n    // result in multiple objectURLs being created?  The docs for this say that\n    // it creates something on the document, which lives until revokeObjectURL\n    // is called on it.  Does that mean we should only ever have one per\n    // this.mediaSource?  It seems like it, but I do not know.  Having only one\n    // seems more predictable, and more memory efficient.\n\n    // Ensure only a single objectURL exists at one time\n    if (!this.objectURL) {\n      this.metric('objectURL.created', 1);\n\n      this.objectURL = window.URL.createObjectURL(this.mediaSource);\n    }\n\n    this.videoElement.src = this.objectURL;\n  }\n\n  destroyVideoElementSrc () {\n    debug('destroyVideoElementSrc...');\n\n    if (!this.mediaSource) {\n      // @todo - should this throw?\n      return;\n    }\n\n    if (!this.objectURL) {\n      // @todo - should this throw?\n      return;\n    }\n\n    // this.metric('objectURL.revoked', 1);\n\n    this.objectURL = null;\n\n    if (this.sourceBuffer) {\n      this.shouldAbort = true;\n    }\n\n    // free the resource\n    return window.URL.revokeObjectURL(this.videoElement.src);\n  }\n\n  reinitializeVideoElementSrc () {\n    this.metric('mediaSource.reinitialized', 1);\n\n    this.destroyVideoElementSrc();\n\n    // reallocate, this will call media source open which will\n    // append the MOOV atom.\n    return this.getVideoElementSrc();\n  }\n\n  isMediaSourceReady () {\n    // found when stress testing many videos, it is possible for the\n    // media source ready state not to be open even though\n    // source open callback is being called.\n    return this.mediaSource && this.mediaSource.readyState === 'open';\n  }\n\n  isSourceBufferReady () {\n    return this.sourceBuffer && this.sourceBuffer.updating === false;\n  }\n\n  async initializeSourceBuffer (mimeCodec, options = {}) {\n    debug('initializeSourceBuffer...');\n\n    options = defaults({}, options, {\n      onAppendStart: noop,\n      onAppendFinish: noop,\n      onRemoveFinish: noop,\n      onAppendError: noop,\n      onRemoveError: noop,\n      onStreamFrozen: noop,\n      onError: noop,\n      retry: true,\n    });\n\n    if (!this.isMediaSourceReady()) {\n      throw new Error('Cannot create the sourceBuffer if the mediaSource is not ready.');\n    }\n\n    // Kill the existing source buffer\n    await this.destroySourceBuffer();\n\n    this.metric('sourceBuffer.created', 1);\n\n    this.sourceBuffer = this.mediaSource.addSourceBuffer(mimeCodec);\n    this.sourceBuffer.mode = 'sequence';\n\n    // Custom Events\n    this.eventListeners.sourceBuffer.onAppendStart = options.onAppendStart;\n    this.eventListeners.sourceBuffer.onAppendError = options.onAppendError;\n    this.eventListeners.sourceBuffer.onRemoveFinish = options.onRemoveFinish;\n    this.eventListeners.sourceBuffer.onAppendFinish = options.onAppendFinish;\n    this.eventListeners.sourceBuffer.onRemoveError = options.onRemoveError;\n    this.eventListeners.sourceBuffer.onStreamFrozen = options.onStreamFrozen;\n    this.eventListeners.sourceBuffer.onError = options.onError;\n\n    // Supported Events\n    this.sourceBuffer.addEventListener('updateend', this.onSourceBufferUpdateEnd);\n    this.sourceBuffer.addEventListener('error', this.eventListeners.sourceBuffer.onError);\n  }\n\n  queueSegment (segment) {\n    if (this.segmentQueue.length) {\n      debug(`Queueing segment.  The queue currently has ${this.segmentQueue.length} segments.`);\n    }\n    else {\n      silly(`Queueing segment.  The queue is currently empty.`);\n    }\n\n    this.metric('queue.added', 1);\n\n    this.segmentQueue.push({\n      timestamp: Date.now(),\n      byteArray: segment,\n    });\n  }\n\n  sourceBufferAbort () {\n    debug('Aborting current sourceBuffer operation');\n\n    try {\n      this.metric('sourceBuffer.abort', 1);\n\n      if (this.sourceBuffer) {\n        this.sourceBuffer.abort();\n        this.shouldAbort = false;\n      }\n    }\n    catch (error) {\n      this.metric('error.sourceBuffer.abort', 1);\n\n      // Somehow, this can be become undefined...\n      if (this.eventListeners.sourceBuffer.onAbortError) {\n        this.eventListeners.sourceBuffer.onAbortError(error);\n      }\n    }\n  }\n\n  _append ({ timestamp, byteArray }) {\n    silly('Appending to the sourceBuffer...');\n\n    try {\n      const estimatedDrift = Date.now() - timestamp;\n\n      if (estimatedDrift > this.options.driftThreshold) {\n        debug(`Estimated drift of ${estimatedDrift} is above the ${this.options.driftThreshold} threshold.  Flushing queue...`);\n        // @todo - perhaps we should re-add the last segment to the queue with a fresh\n        // timestamp?  I think one cause of stream freezing is the sourceBuffer getting\n        // starved, but I don't know if that's correct\n        this.metric('queue.removed', this.segmentQueue.length + 1);\n        this.segmentQueue = [];\n        return;\n      }\n\n      silly(`Appending to the buffer with an estimated drift of ${estimatedDrift}`);\n\n      this.metric('sourceBuffer.append', 1);\n\n      this.sourceBuffer.appendBuffer(byteArray);\n    }\n    catch (error) {\n      if (error.message && error.message.toLowerCase().includes(FULL_BUFFER_ERROR)) {\n        // @todo - make this a valid metric\n        // this.metric('error.sourceBuffer.filled', 1);\n\n        // If the buffer is full, we will flush it\n        console.warn('source buffer is full, about to flush it...');\n        this.trimBuffer(undefined, true);\n      }\n      else {\n        this.metric('error.sourceBuffer.append', 1);\n\n        this.eventListeners.sourceBuffer.onAppendError(error, byteArray);\n      }\n    }\n  }\n\n  processNextInQueue () {\n    silly('processNextInQueue');\n\n    if (this.destroyed) {\n      return;\n    }\n\n    if (document.hidden) {\n      debug('Tab not in focus - dropping frame...');\n      this.metric('frameDrop.hiddenTab', 1);\n      this.metric('queue.cannotProcessNext', 1);\n      return;\n    }\n\n    if (!this.isMediaSourceReady()) {\n      debug('The mediaSource is not ready');\n      this.metric('queue.mediaSourceNotReady', 1);\n      this.metric('queue.cannotProcessNext', 1);\n      return;\n    }\n\n    if (!this.isSourceBufferReady()) {\n      debug('The sourceBuffer is busy');\n      this.metric('queue.sourceBufferNotReady', 1);\n      this.metric('queue.cannotProcessNext', 1);\n      return;\n    }\n\n    if (this.segmentQueue.length > 0) {\n      this.metric('queue.shift', 1);\n      this.metric('queue.canProcessNext', 1);\n      this._append(this.segmentQueue.shift());\n    }\n  }\n\n  formatMoof (moof) {\n    // We must overwrite the sequence number locally, because it\n    // the sequence that comes from the server will not necessarily\n    // start at zero.  It should start from zero locally.  This\n    // requirement may have changed with more recent versions of the\n    // browser, but it appears to make the video play a little more\n    // smoothly\n    moof[20] = (this.sequenceNumber & 0xFF000000) >> 24;\n    moof[21] = (this.sequenceNumber & 0x00FF0000) >> 16;\n    moof[22] = (this.sequenceNumber & 0x0000FF00) >> 8;\n    moof[23] = this.sequenceNumber & 0xFF;\n\n    return moof;\n  }\n\n  appendMoov (moov) {\n    debug('appendMoov');\n\n    if (!moov) {\n      // @todo - do we need to throw here or something?  Under what\n      // circumstance would this be called with no moov?\n      return;\n    }\n\n    this.metric('sourceBuffer.lastMoovSize', moov.length);\n\n    // Sometimes this can get hit after destroy is called\n    if (!this.eventListeners.sourceBuffer.onAppendStart) {\n      return;\n    }\n\n    debug('appending moov...');\n    this.queueSegment(moov);\n\n    this.processNextInQueue();\n  }\n\n  append (byteArray) {\n    silly('Append');\n\n    if (this.destroyed) {\n      return;\n    }\n\n    this.metric('sourceBuffer.lastMoofSize', byteArray.length);\n\n    // console.log(mp4toJSON(byteArray));\n\n    // Sometimes this can get hit after destroy is called\n    if (!this.eventListeners.sourceBuffer.onAppendStart) {\n      return;\n    }\n\n    this.eventListeners.sourceBuffer.onAppendStart(byteArray);\n\n    this.metric('queue.append', 1);\n\n    this.queueSegment(this.formatMoof(byteArray));\n    this.sequenceNumber++;\n\n    this.processNextInQueue();\n  }\n\n  getBufferTimes () {\n    silly('getBufferTimes...');\n\n    try {\n      const previousBufferSize = this.timeBuffered;\n      const bufferTimeStart = this.sourceBuffer.buffered.start(0);\n      const bufferTimeEnd = this.sourceBuffer.buffered.end(0);\n      const currentBufferSize = bufferTimeEnd - bufferTimeStart;\n\n      silly('getBufferTimes finished successfully...');\n\n      return {\n        previousBufferSize,\n        currentBufferSize,\n        bufferTimeStart,\n        bufferTimeEnd,\n      };\n    }\n    catch (error) {\n      debug('getBufferTimes finished unsuccessfully...');\n\n      return null;\n    }\n  }\n\n  trimBuffer (info = this.getBufferTimes(), clearBuffer = false) {\n    silly('trimBuffer...');\n\n    this.metric('sourceBuffer.lastKnownBufferSize', this.timeBuffered);\n\n    try {\n      if (info && (clearBuffer || (this.timeBuffered > this.options.bufferSizeLimit)) && this.isSourceBufferReady()) {\n        debug('Removing old stuff from sourceBuffer...');\n\n        // @todo - this is the biggest performance problem we have with this player.\n        // Can you figure out how to manage the memory usage without causing the streams\n        // to stutter?\n        this.metric('sourceBuffer.trim', this.options.bufferTruncateValue);\n\n        const trimEndTime = clearBuffer\n          ? Infinity\n          : info.bufferTimeStart + this.options.bufferTruncateValue;\n\n        debug('trimming buffer...');\n        this.sourceBuffer.remove(info.bufferTimeStart, trimEndTime);\n\n        debug('finished trimming buffer...');\n      }\n    }\n    catch (error) {\n      debug('trimBuffer failure!');\n      this.metric('sourceBuffer.trim.error', 1);\n      this.eventListeners.sourceBuffer.onRemoveError(error);\n      console.error(error);\n    }\n\n    silly('trimBuffer finished...');\n  }\n\n  onRemoveFinish (info = this.getBufferTimes()) {\n    debug('On remove finish...');\n\n    this.metric('sourceBuffer.updateEnd.removeEvent', 1);\n    this.eventListeners.sourceBuffer.onRemoveFinish(info);\n  }\n\n  onAppendFinish (info = this.getBufferTimes()) {\n    silly('On append finish...');\n\n    this.metric('sourceBuffer.updateEnd.appendEvent', 1);\n\n    // The current buffer size should always be bigger.If it isn't, there is a problem,\n    // and we need to reinitialize or something.\n    if (this.previousTimeEnd && info.bufferTimeEnd <= this.previousTimeEnd) {\n      this.metric('sourceBuffer.updateEnd.bufferFrozen', 1);\n      this.eventListeners.sourceBuffer.onStreamFrozen();\n      return;\n    }\n\n    this.previousTimeEnd = info.bufferTimeEnd;\n\n    this.eventListeners.sourceBuffer.onAppendFinish(info);\n    this.trimBuffer(info);\n  }\n\n  onSourceBufferUpdateEnd = () => {\n    silly('onUpdateEnd');\n\n    this.metric('sourceBuffer.updateEnd', 1);\n\n    if (this.shouldAbort) {\n      this.sourceBufferAbort();\n    }\n\n    try {\n      // Sometimes the mediaSource is removed while an update is being\n      // processed, resulting in an error when trying to read the\n      // \"buffered\" property.\n      if (this.sourceBuffer.buffered.length <= 0) {\n        this.metric('sourceBuffer.updateEnd.bufferLength.empty', 1);\n        debug('After updating, the sourceBuffer has no length!');\n        return;\n      }\n    }\n    catch (error) {\n      // @todo - do we need to handle this?\n      this.metric('sourceBuffer.updateEnd.bufferLength.error', 1);\n      debug('The mediaSource was removed while an update operation was occurring.');\n      return;\n    }\n\n    const info = this.getBufferTimes();\n\n    this.timeBuffered = info.currentBufferSize;\n\n    if (info.previousBufferSize !== null && info.previousBufferSize > this.timeBuffered) {\n      this.onRemoveFinish(info);\n    }\n    else {\n      this.onAppendFinish(info);\n    }\n\n    this.processNextInQueue();\n  }\n\n  destroySourceBuffer () {\n    debug('destroySourceBuffer...');\n\n    return new Promise((resolve, reject) => {\n      const finish = () => {\n        if (this.sourceBuffer) {\n          this.sourceBuffer.removeEventListener('updateend', finish);\n        }\n\n        // We must abort in the final updateend listener to ensure that\n        // any operations, especially the remove operation, finish first,\n        // as aborting while removing is deprecated.\n        this.sourceBufferAbort();\n\n        debug('destroySourceBuffer finished...');\n        resolve();\n      };\n\n      if (!this.sourceBuffer) {\n        return finish();\n      }\n\n      this.sourceBuffer.removeEventListener('updateend', this.onSourceBufferUpdateEnd);\n      this.sourceBuffer.removeEventListener('error', this.eventListeners.sourceBuffer.onError);\n\n      this.sourceBuffer.addEventListener('updateend', finish);\n\n      // @todo - this is a hack - sometimes, the trimBuffer operation does not cause an update\n      // on the sourceBuffer.  This acts as a timeout to ensure the destruction of this mseWrapper\n      // instance can complete.\n      debug('giving sourceBuffer some time to finish updating itself...');\n      setTimeout(finish, 1000);\n    });\n  }\n\n  destroyMediaSource () {\n    this.metric('sourceBuffer.destroyed', 1);\n\n    debug('Destroying mediaSource...');\n\n    if (!this.mediaSource) {\n      return;\n    }\n\n    // We must do this PRIOR to the sourceBuffer being destroyed, to ensure that the\n    // 'buffered' property is still available, which is necessary for completely\n    // emptying the sourceBuffer.\n    this.trimBuffer(undefined, true);\n\n    this.mediaSource.removeEventListener('sourceopen', this.eventListeners.mediaSource.sourceopen);\n    this.mediaSource.removeEventListener('sourceended', this.eventListeners.mediaSource.sourceended);\n    this.mediaSource.removeEventListener('error', this.eventListeners.mediaSource.error);\n\n    // let sourceBuffers = this.mediaSource.sourceBuffers;\n\n    // if (sourceBuffers.SourceBuffers) {\n    //   // @see - https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/sourceBuffers\n    //   sourceBuffers = sourceBuffers.SourceBuffers();\n    // }\n\n    // for (let i = 0; i < sourceBuffers.length; i++) {\n    // this.mediaSource.removeSourceBuffer(sourceBuffers[i]);\n    // }\n\n    if (this.isMediaSourceReady() && this.isSourceBufferReady()) {\n      debug('media source was ready for endOfStream and removeSourceBuffer');\n      this.mediaSource.endOfStream();\n      this.mediaSource.removeSourceBuffer(this.sourceBuffer);\n    }\n\n    // @todo - is this happening at the right time, or should it happen\n    // prior to removing the source buffers?\n    this.destroyVideoElementSrc();\n\n    this.metric('mediaSource.destroyed', 1);\n  }\n\n  _freeAllResources () {\n    debug('_freeAllResources...');\n\n    // We make NO assumptions here about what instance properties are\n    // needed during the asynchronous destruction of the source buffer,\n    // therefore we wait until it is finished to free all of these\n    // resources.\n    this.mediaSource = null;\n    this.sourceBuffer = null;\n\n    this.videoElement = null;\n\n    this.timeBuffered = null;\n    this.previousTimeEnd = null;\n    this.segmentQueue = null;\n\n    this.options = null;\n    this.metrics = null;\n    this.events = null;\n    this.eventListeners = null;\n\n    debug('_freeAllResources finished...');\n  }\n\n  destroy () {\n    debug('destroy...');\n\n    if (this.destroyed) {\n      return Promise.resolve();\n    }\n\n    this.destroyed = true;\n\n    this.destroyMediaSource();\n\n    // We MUST not force the destroy method here to be asynchronous, even\n    // though it \"should\" be.  This is because we cannot assume that the\n    // caller has control over whether or not its destroy method can be\n    // properly run asynchronously.  The specific use case here is that\n    // many client side libraries (angular, marionette, react, etc.) do\n    // not all give pre-destruction methods or events that can wait for\n    // an asynchronous operation.  If angular decides it is going to\n    // destroy a DOM element when a user navigates, we have no way of\n    // ensuring that it supports asynchronous operations, or that the\n    // caller is properly using them, if they exist.  Therefore, this\n    // destroy method will clean up the source buffer later, allowing the\n    // rest of the clsp destruction logic to continue.  The use case for\n    // needing that functionality is that the conduit needs to use the its\n    // iframe to contact the server, and if the iframe is destroyed before\n    // the conduit talks to the server, errors will be thrown during\n    // destruction, which will lead to resources not being free / memory\n    // leaks, which may cause the browser to crash after extended periods\n    // of time, such as 24 hours.\n    // Note that we still return the promise, so that the caller has the\n    // option of waiting if they choose.\n    const destroyPromise = this.destroySourceBuffer()\n      .then(() => {\n        debug('destroySourceBuffer successfully finished...');\n        this._freeAllResources();\n        debug('destroy successfully finished...');\n      })\n      .catch((error) => {\n        debug('destroySourceBuffer failed...');\n        console.error('Error while destroying the source buffer!');\n        console.error(error);\n\n        // Do our best at memory management, even on failure\n        this._freeAllResources();\n        debug('destroy unsuccessfully finished...');\n      });\n\n    debug('exiting destroy, asynchronous destroy logic in progress...');\n\n    return destroyPromise;\n  }\n}\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\n/**\n * route inbound messages/data to player's event handlers.\n */\nexport default class MqttTopicHandlers {\n  constructor (id, iov) {\n    this.id = id;\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:MqttTopicHandlers`);\n\n    this.debug('constructing...');\n\n    this.iov = iov;\n    this._handlers = {};\n  }\n\n  get (topic) {\n    this.debug('getting...', topic);\n\n    return this._handlers[topic];\n  }\n\n  register (topic, callback) {\n    this.debug('register...', topic);\n\n    this._handlers[topic] = (...args) => {\n      this.debug('executing handler...', topic);\n\n      callback(...args);\n    };\n  }\n\n  unregister (topic) {\n    this.debug('unregistering...', topic);\n\n    if (this.exists(topic)) {\n      delete this._handlers[topic];\n    }\n  }\n\n  exists (topic) {\n    this.debug('exists?', topic);\n\n    return this._handlers.hasOwnProperty(topic);\n  }\n\n  // central entry point for all MQTT inbound traffic.\n  msghandler (message) {\n    this.debug('msghandler...', message);\n\n    var topic = message.destinationName;\n\n    if (!this.exists(topic)) {\n      this.debug(`No handler for ${topic} - message dropped`, message);\n\n      return;\n    }\n\n    try {\n      this.get(topic)(message);\n    }\n    catch (e) {\n      this.iov.events.exception(`${topic} handler exception`, e);\n    }\n  }\n}\n","import Debug from 'debug';\nimport uuidv4 from 'uuid/v4';\nimport defaults from 'lodash/defaults';\n\nimport MSEWrapper from './MSEWrapper';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\nconst debug = Debug(`${DEBUG_PREFIX}:IOVPlayer`);\nconst silly = Debug(`silly:${DEBUG_PREFIX}:IOVPlayer`);\n\n/**\n * Responsible for receiving stream input and routing it to the media source\n * buffer for rendering on the video tag. There is some 'light' reworking of\n * the binary data that is required.\n *\n * @todo - this class should have no knowledge of videojs or its player, since\n * it is supposed to be capable of playing video by itself.  The plugin that\n * uses this player should have all of the videojs logic, and none should\n * exist here.\n *\n * var player = IOVPlayer.factory(iov);\n * player.play( video_element_id, stream_name );\n*/\nexport default class IOVPlayer {\n  static EVENT_NAMES = [\n    'metric',\n    'firstFrameShown',\n    'videoReceived',\n    'videoInfoReceived',\n  ];\n\n  static METRIC_TYPES = [\n    'sourceBuffer.bufferTimeEnd',\n    'video.currentTime',\n    'video.drift',\n    'video.driftCorrection',\n    'video.segmentInterval',\n    'video.segmentIntervalAverage',\n  ];\n\n  static SEGMENT_INTERVAL_SAMPLE_SIZE = 5;\n  static DRIFT_CORRECTION_CONSTANT = 2;\n\n  static factory (iov, playerInstance, options = {}) {\n    return new IOVPlayer(iov, playerInstance, options);\n  }\n\n  constructor (iov, playerInstance, options) {\n    debug('constructor');\n\n    this.metrics = {};\n\n    // @todo - there must be a more proper way to do events than this...\n    this.events = {};\n\n    for (let i = 0; i < IOVPlayer.EVENT_NAMES.length; i++) {\n      this.events[IOVPlayer.EVENT_NAMES[i]] = [];\n    }\n\n    this._id = uuidv4();\n    this.iov = iov;\n    this.playerInstance = playerInstance;\n    this.eid = this.playerInstance.el().firstChild.id;\n    this.id = this.eid.replace('_html5_api', '');\n\n    this.initializeVideoElement();\n\n    this.options = defaults({}, options, {\n      segmentIntervalSampleSize: IOVPlayer.SEGMENT_INTERVAL_SAMPLE_SIZE,\n      driftCorrectionConstant: IOVPlayer.DRIFT_CORRECTION_CONSTANT,\n      enableMetrics: false,\n    });\n\n    this.state = 'initializing';\n    this.firstFrameShown = false;\n    this.stopped = false;\n\n    // Used for determining the size of the internal buffer hidden from the MSE\n    // api by recording the size and time of each chunk of video upon buffer append\n    // and recording the time when the updateend event is called.\n    this.LogSourceBuffer = false;\n    this.LogSourceBufferTopic = null;\n\n    this.latestSegmentReceived = null;\n    this.segmentIntervalAverage = null;\n    this.segmentInterval = null;\n    this.segmentIntervals = [];\n\n    this.mseWrapper = null;\n    this.moovBox = null;\n    this.guid = null;\n    this.mimeCodec = null;\n\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n  }\n\n  on (name, action) {\n    debug(`Registering Listener for ${name} event...`);\n\n    if (!IOVPlayer.EVENT_NAMES.includes(name)) {\n      throw new Error(`\"${name}\" is not a valid event.\"`);\n    }\n\n    if (this.destroyed) {\n      return;\n    }\n\n    this.events[name].push(action);\n  }\n\n  trigger (name, value) {\n    const sillyMetrics = [\n      'metric',\n      'videoReceived',\n    ];\n\n    if (sillyMetrics.includes(name)) {\n      silly(`Triggering ${name} event...`);\n    }\n    else {\n      debug(`Triggering ${name} event...`);\n    }\n\n    if (this.destroyed) {\n      return;\n    }\n\n    if (!IOVPlayer.EVENT_NAMES.includes(name)) {\n      throw new Error(`\"${name}\" is not a valid event.\"`);\n    }\n\n    for (let i = 0; i < this.events[name].length; i++) {\n      this.events[name][i](value, this);\n    }\n  }\n\n  metric (type, value) {\n    if (!this.options.enableMetrics) {\n      return;\n    }\n\n    if (!IOVPlayer.METRIC_TYPES.includes(type)) {\n      // @todo - should this throw?\n      return;\n    }\n\n    switch (type) {\n      case 'video.driftCorrection': {\n        if (!this.metrics[type]) {\n          this.metrics[type] = 0;\n        }\n\n        this.metrics[type] += value;\n\n        break;\n      }\n      default: {\n        this.metrics[type] = value;\n      }\n    }\n\n    this.trigger('metric', {\n      type,\n      value: this.metrics[type],\n    });\n  }\n\n  _onError (type, message, error) {\n    console.warn(type, ':', message);\n    console.error(error);\n  }\n\n  assertMimeCodecSupported (mimeCodec) {\n    if (!MSEWrapper.isMimeCodecSupported(mimeCodec)) {\n      this.state = 'unsupported-mime-codec';\n\n      const message = `Unsupported mime codec: ${mimeCodec}`;\n\n      this.videoPlayer.errors.extend({\n        PLAYER_ERR_IOV: {\n          headline: 'Error Playing Stream',\n          message,\n        },\n      });\n\n      this.videoPlayer.error({ code: 'PLAYER_ERR_IOV' });\n\n      throw new Error(message);\n    }\n  }\n\n  initializeVideoElement () {\n    this.videoJsVideoElement = document.getElementById(this.eid);\n\n    if (!this.videoJsVideoElement) {\n      throw new Error(`Unable to find an element in the DOM with id \"${this.eid}\".`);\n    }\n\n    const videoId = `clsp-video-${this._id}`;\n\n    // when videojs initializes the video element (or something like that),\n    // it creates events and listeners on that element that it uses, however\n    // these events interfere with our ability to play clsp streams.  Cloning\n    // the element like this and reinserting it is a blunt instrument to remove\n    // all of the videojs events so that we are in control of the player.\n    // this.videoElement = this.videoJsVideoElement.cloneNode();\n    this.videoElement = this.videoJsVideoElement.cloneNode();\n    this.videoElement.setAttribute('id', videoId);\n    this.videoElement.classList.add('clsp-video');\n\n    this.videoElementParent = this.videoJsVideoElement.parentNode;\n\n    this.on('firstFrameShown', () => {\n      // @todo - this may be overkill given the IOV changeSourceMaxWait...\n      // When the video is ready to be displayed, swap out the video player if\n      // the source has changed.  This is what allows tours to switch to the next\n      if (this.videoElementParent !== null) {\n        try {\n          this.videoElementParent.insertBefore(this.videoElement, this.videoJsVideoElement);\n\n          let videos = this.videoElementParent.getElementsByTagName('video');\n\n          for (let i = 0; i < videos.length; i++) {\n            let video = videos[i];\n            const id = video.getAttribute('id');\n\n            if (id !== this.eid && id !== videoId) {\n              // video.pause();\n              // video.removeAttribute('src');\n              // video.load();\n              // video.style.display = 'none';\n              this.videoElementParent.removeChild(video);\n              video.remove();\n              video = null;\n              videos = null;\n              break;\n            }\n          }\n\n          // this.videoElementParent.replaceChild(this.videoElement, this.videoJsVideoElement);\n          // is there still a reference to this element?\n          // this.videoJsVideoElement = null;\n        }\n        catch (e) {\n          console.error(e);\n        }\n      }\n    });\n  }\n\n  async reinitializeMseWrapper (mimeCodec) {\n    if (this.mseWrapper) {\n      await this.mseWrapper.destroy();\n    }\n\n    this.mseWrapper = MSEWrapper.factory(this.videoElement);\n\n    this.mseWrapper.on('metric', ({ type, value }) => {\n      this.trigger('metric', { type, value });\n    });\n\n    this.mseWrapper.initializeMediaSource({\n      onSourceOpen: async () => {\n        debug('on mediaSource sourceopen');\n\n        await this.mseWrapper.initializeSourceBuffer(mimeCodec, {\n          onAppendStart: (byteArray) => {\n            silly('On Append Start...');\n\n            if ((this.LogSourceBuffer === true) && (this.LogSourceBufferTopic !== null)) {\n              debug(`Recording ${parseInt(byteArray.length)} bytes of data.`);\n\n              const mqtt_msg = new window.Paho.MQTT.Message(byteArray);\n              mqtt_msg.destinationName = this.LogSourceBufferTopic;\n              window.MQTTClient.send(mqtt_msg);\n            }\n\n            this.iov.statsMsg.byteCount += byteArray.length;\n          },\n          onAppendFinish: (info) => {\n            silly('On Append Finish...');\n\n            if (!this.firstFrameShown) {\n              this.firstFrameShown = true;\n              this.playerInstance.trigger('firstFrameShown');\n              this.trigger('firstFrameShown');\n            }\n\n            this.drift = info.bufferTimeEnd - this.videoElement.currentTime;\n\n            this.metric('sourceBuffer.bufferTimeEnd', info.bufferTimeEnd);\n            this.metric('video.currentTime', this.videoElement.currentTime);\n            this.metric('video.drift', this.drift);\n\n            if (this.drift > ((this.segmentIntervalAverage / 1000) + this.options.driftCorrectionConstant)) {\n              this.metric('video.driftCorrection', 1);\n              this.videoElement.currentTime = info.bufferTimeEnd;\n            }\n\n            if (this.videoElement.paused === true) {\n              debug('Video is paused!');\n\n              try {\n                const promise = this.videoElement.play();\n\n                if (typeof promise !== 'undefined') {\n                  promise.catch((error) => {\n                    this._onError(\n                      'videojs.play.promise',\n                      'Error while trying to play videojs player',\n                      error\n                    );\n                  });\n                }\n              }\n              catch (error) {\n                this._onError(\n                  'videojs.play.notPromise',\n                  'Error while trying to play videojs player',\n                  error\n                );\n              }\n            }\n          },\n          onRemoveFinish: (info) => {\n            debug('onRemoveFinish');\n          },\n          onAppendError: async (error) => {\n            // internal error, this has been observed to happen the tab\n            // in the browser where this video player lives is hidden\n            // then reselected. 'ex' is undefined the error is bug\n            // within the MSE C++ implementation in the browser.\n            this._onError(\n              'sourceBuffer.append',\n              'Error while appending to sourceBuffer',\n              error\n            );\n\n            await this.reinitializeMseWrapper(mimeCodec);\n          },\n          onRemoveError: (error) => {\n            if (error.constructor.name === 'DOMException') {\n              // @todo - every time the mseWrapper is destroyed, there is a\n              // sourceBuffer error.  No need to log that, but you should fix it\n              return;\n            }\n\n            // observed this fail during a memry snapshot in chrome\n            // otherwise no observed failure, so ignore exception.\n            this._onError(\n              'sourceBuffer.remove',\n              'Error while removing segments from sourceBuffer',\n              error\n            );\n          },\n          onStreamFrozen: async () => {\n            debug('stream appears to be frozen - reinitializing...');\n\n            await this.reinitializeMseWrapper(mimeCodec);\n          },\n          onError: async (error) => {\n            this._onError(\n              'mediaSource.sourceBuffer.generic',\n              'mediaSource sourceBuffer error',\n              error\n            );\n\n            await this.reinitializeMseWrapper(mimeCodec);\n          },\n        });\n\n        this.trigger('videoInfoReceived');\n        this.mseWrapper.appendMoov(this.moovBox);\n      },\n      onSourceEnded: async () => {\n        debug('on mediaSource sourceended');\n\n        await this.stop();\n      },\n      onError: (error) => {\n        this._onError(\n          'mediaSource.generic',\n          'mediaSource error',\n          // @todo - sometimes, this error is an event rather than an error!\n          // If different onError calls use different method signatures, that\n          // needs to be accounted for in the MSEWrapper, and the actual error\n          // that was thrown must ALWAYS be the first argument here.  As a\n          // shortcut, we can log `...args` here instead.\n          error\n        );\n      },\n    });\n\n    if (!this.mseWrapper.mediaSource || !this.videoElement) {\n      throw new Error('The video element or mediaSource is not ready!');\n    }\n\n    this.mseWrapper.reinitializeVideoElementSrc();\n  }\n\n  resyncStream (mimeCodec) {\n    // subscribe to a sync topic that will be called if the stream that is feeding\n    // the mse service dies and has to be restarted that this player should restart the stream\n    debug('Trying to resync stream...');\n\n    this.iov.conduit.subscribe(`iov/video/${this.guid}/resync`, async () => {\n      debug('sync received re-initialize media source buffer');\n      await this.reinitializeMseWrapper(mimeCodec);\n    });\n  }\n\n  async restart () {\n    debug('restart');\n\n    await this.stop();\n\n    this.play();\n  }\n\n  play () {\n    debug('play');\n\n    this.stopped = false;\n\n    // @todo - why doesn't this play/stop connect/disconnect work?\n    // this.iov.conduit.connect();\n\n    this.iov.conduit.transaction(\n      `iov/video/${window.btoa(this.iov.config.streamName)}/request`,\n      (...args) => this.onIovPlayTransaction(...args),\n      { clientId: this.iov.config.clientId }\n    );\n  }\n\n  stop () {\n    debug('stop...');\n\n    this.stopped = true;\n    this.moovBox = null;\n\n    if (this.guid) {\n      // Stop listening for moofs\n      this.iov.conduit.unsubscribe(`iov/video/${this.guid}/live`);\n\n      // Stop listening for resync events\n      this.iov.conduit.unsubscribe(`iov/video/${this.guid}/resync`);\n\n      // Tell the server we've stopped\n      this.iov.conduit.publish(\n        `iov/video/${this.guid}/stop`,\n        { clientId: this.iov.config.clientId }\n      );\n\n      // @todo - why doesn't this play/stop connect/disconnect work?\n      // this.iov.conduit.disconnect();\n    }\n\n    debug('stop about to finish synchronous operations and return promise...');\n\n    // The logic above MUST be run synchronously when called, therefore,\n    // we cannot use async to define the stop method, and must return a\n    // promise here rather than using await.  We return this promise so\n    // that the caller has the option of waiting, but is not forced to\n    // wait.\n    return new Promise((resolve, reject) => {\n      // Don't wait until the next play event or the destruction of this player\n      // to clear the MSE\n      if (this.mseWrapper) {\n        this.mseWrapper.destroy()\n          .then(() => {\n            this.mseWrapper = null;\n            debug('stop succeeded asynchronously...');\n            resolve();\n          })\n          .catch((error) => {\n            this.mseWrapper = null;\n            debug('stop failed asynchronously...');\n            reject(error);\n          });\n      }\n      else {\n        resolve();\n      }\n    });\n  }\n\n  getSegmentIntervalMetrics () {\n    const previousSegmentReceived = this.latestSegmentReceived;\n    this.latestSegmentReceived = Date.now();\n\n    if (previousSegmentReceived) {\n      this.segmentInterval = this.latestSegmentReceived - previousSegmentReceived;\n    }\n\n    if (this.segmentInterval) {\n      if (this.segmentIntervals.length >= this.options.segmentIntervalSampleSize) {\n        this.segmentIntervals.shift();\n      }\n\n      this.segmentIntervals.push(this.segmentInterval);\n\n      let segmentIntervalSum = 0;\n\n      for (let i = 0; i < this.segmentIntervals.length; i++) {\n        segmentIntervalSum += this.segmentIntervals[i];\n      }\n\n      this.segmentIntervalAverage = segmentIntervalSum / this.segmentIntervals.length;\n\n      this.metric('video.segmentInterval', this.segmentInterval);\n      this.metric('video.segmentIntervalAverage', this.segmentIntervalAverage);\n    }\n  }\n\n  onVisibilityChange = () => {\n    // @todo - the timeout value will be created every time this function is\n    // executed, which means that if you switch tabs and come back faster than\n    // one second, the timeout from the tab switch will never be cleared (because\n    // it is no longer in scope), and the video will be stopped and never re-played\n    let timeout;\n\n    if (document.hidden) {\n      timeout = setTimeout(async () => {\n        await this.stop();\n      }, 1000);\n    }\n    else {\n      clearTimeout(timeout);\n      this.play();\n    }\n  };\n\n  // @todo - there is much shared between this and onChangeSourceTransaction\n  onIovPlayTransaction ({ mimeCodec, guid }) {\n    if (this.stopped) {\n      return;\n    }\n\n    debug('onIovPlayTransaction');\n\n    this.assertMimeCodecSupported(mimeCodec);\n\n    const initSegmentTopic = `${this.iov.config.clientId}/init-segment/${parseInt(Math.random() * 1000000)}`;\n\n    this.state = 'waiting-for-first-moov';\n\n    this.iov.conduit.subscribe(initSegmentTopic, async ({ payloadBytes }) => {\n      if (this.stopped) {\n        return;\n      }\n\n      debug(`onIovPlayTransaction ${initSegmentTopic} listener fired`);\n      debug(`received moov of type \"${typeof payloadBytes}\" from server`);\n\n      const moov = payloadBytes;\n\n      this.state = 'waiting-for-first-moof';\n\n      this.iov.conduit.unsubscribe(initSegmentTopic);\n\n      const newTopic = `iov/video/${guid}/live`;\n\n      // subscribe to the live video topic.\n      this.iov.conduit.subscribe(newTopic, (mqtt_msg) => {\n        if (this.stopped) {\n          return;\n        }\n\n        this.trigger('videoReceived');\n        this.getSegmentIntervalMetrics();\n        this.mseWrapper.append(mqtt_msg.payloadBytes);\n      });\n\n      this.guid = guid;\n      this.moovBox = moov;\n      this.mimeCodec = mimeCodec;\n\n      // this.trigger('firstChunk');\n\n      await this.reinitializeMseWrapper(mimeCodec);\n      this.resyncStream(mimeCodec);\n    });\n\n    this.iov.conduit.publish(`iov/video/${guid}/play`, {\n      initSegmentTopic,\n      clientId: this.iov.config.clientId,\n    });\n  }\n\n  _freeAllResources () {\n    debug('_freeAllResources...');\n\n    // Note you will need to destroy the iov yourself.  The child should\n    // probably not destroy the parent\n    this.iov = null;\n\n    this.state = null;\n    this.firstFrameShown = null;\n\n    this.playerInstance = null;\n    this.videoJsVideoElement = null;\n    this.videoElementParent = null;\n\n    this.events = null;\n    this.metrics = null;\n\n    this.LogSourceBuffer = null;\n    this.LogSourceBufferTopic = null;\n\n    this.latestSegmentReceived = null;\n    this.segmentIntervalAverage = null;\n    this.segmentInterval = null;\n    this.segmentIntervals = null;\n\n    this.guid = null;\n    this.moovBox = null;\n    this.mimeCodec = null;\n\n    debug('_freeAllResources finished...');\n  }\n\n  destroy () {\n    debug('destroy...');\n\n    if (this.destroyed) {\n      return;\n    }\n\n    this.destroyed = true;\n\n    // Note that we DO NOT wait for the stop command to finish execution,\n    // because this destroy method MUST be treated as a synchronous operation\n    // to ensure that the caller is not forced to wait on destruction.  This\n    // allows us to properly support client side libraries and frameworks that\n    // do not support asynchronous destruction.  See the comments in the destroy\n    // method on the MSEWrapper for a more detailed explanation.\n    debug('about to stop...');\n    this.stop()\n      .then(() => {\n        debug('stopped successfully...');\n        this._freeAllResources();\n        debug('destroy successfully finished...');\n      })\n      .catch((error) => {\n        debug('stopped unsuccessfully...');\n        console.error('Error while destroying the iov player!');\n        console.error(error);\n        this._freeAllResources();\n        debug('destroy unsuccessfully finished...');\n      });\n\n    // This MUST be executed immediately after the stop command issues its\n    // conduit commands.  If it is not, meaning the stop operation was waited\n    // for, then we run the risk of the iframe being destroyed by the caller\n    // before we can properly disconnect from the server.\n    debug('disconnecting from server...');\n    this.iov.conduit.disconnect();\n\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n\n    // Setting the src of the video element to an empty string is\n    // the only reliable way we have found to ensure that MediaSource,\n    // SourceBuffer, and various Video elements are properly dereferenced\n    // to avoid memory leaks\n    this.videoElement.src = '';\n    this.videoElement = null;\n\n    debug('exiting destroy, asynchronous destroy logic in progress...');\n  }\n};\n","'use strict';\n\nimport { version } from '../../package.json';\n\nconst PLUGIN_NAME = 'clsp';\nconst MINIMUM_CHROME_VERSION = 52;\n\n// @todo - this mime type, though used in the videojs plugin, and\n// seemingly enforced, is not actually enforced.  The only enforcement\n// done is requiring the user provide this string on the video element\n// in the DOM.  The codecs that are supplied by the SFS's vary.  Here\n// are some \"valid\", though not enforced mimeCodec values I have come\n// across:\n// video/mp4; codecs=\"avc1.4DE016\"\n// video/mp4; codecs=\"avc1.42E00C\"\n// video/mp4; codecs=\"avc1.42E00D\"\nconst SUPPORTED_MIME_TYPE = \"video/mp4; codecs='avc1.42E01E'\";\n\nfunction browserIsCompatable () {\n  const isChrome = Boolean(window.chrome);\n\n  if (!isChrome) {\n    return false;\n  }\n\n  // For the MAC\n  window.MediaSource = window.MediaSource || window.WebKitMediaSource;\n\n  if (!window.MediaSource) {\n    console.error('Media Source Extensions not supported in your browser: Claris Live Streaming will not work!');\n\n    return false;\n  }\n\n  try {\n    return (parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10) >= MINIMUM_CHROME_VERSION);\n  }\n  catch (error) {\n    console.error(error);\n\n    return false;\n  }\n}\n\nfunction isSupportedMimeType (mimeType) {\n  return mimeType === SUPPORTED_MIME_TYPE;\n}\n\nexport default {\n  version,\n  name: PLUGIN_NAME,\n  supported: browserIsCompatable,\n  isSupportedMimeType,\n};\n","'use strict';\n\nimport 'srcdoc-polyfill';\nimport './conduit/clspConduit.generated.js';\n\nimport MseOverMqttPlugin from './MseOverMqttPlugin';\nimport '../styles/videojs-mse-over-clsp.scss';\n\n// @todo - do not initialize the plugin by default, since that is a side\n// effect.  make the caller call the initialize function.  also, is it\n// possible to unregister the plugin?\nconst clspPlugin = MseOverMqttPlugin();\n\nclspPlugin.register();\n\nexport default clspPlugin;\n","// removed by extract-text-webpack-plugin","module.exports = videojs;"],"sourceRoot":""}